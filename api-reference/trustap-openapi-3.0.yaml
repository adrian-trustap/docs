openapi: 3.0.1
info:
  title: Trustap API
  description: |
    The Trustap API is a REST-based API for managing user data and
    transactions for Trustap users.

    Note that, like Stripe, all API `price` and `charge` fields expect
    amounts to be provided in a currency's smallest unit. See [the Stripe
    documentation](https://stripe.com/docs/currencies#zero-decimal) for more
    details.

    API Keys
    --------

    Some endpoints such as `/charge` endpoints can be accessed directly
    using an API key. API keys are provided as the "username" portion of a
    basic auth authentication. For example, the Trustap fee for a new online
    transaction can be determined using the following cURL request with an
    API key:

    ``` bash
    curl -u '<api_key>': 'https://dev.stage.trustap.com/api/v1/charge?currency=eur&price=1234'
    ```

    Deprecation
    -----------

    Deprecated endpoints are tagged with the word `DEPRECATED` at the start
    of their description. The deprecation message will describe what
    endpoints/approach should be used instead.

    Note that deprecated endpoints will not be removed from the current
    version of the API, but their use is discouraged. Furthermore, migrating
    to later major versions of the API will be made easier by avoiding
    deprecated endpoints.

    Production
    ----------

    This documentation references the staging environment of the Trustap
    API, which is available at `https://dev.stage.trustap.com` and uses the
    `trustap-stage` realm during authentication. This environment can be
    used for implementing and testing features using test credit cards, bank
    accounts, etc.

    When all features using Trustap have been implemented and tested
    sufficiently, the production environment of the Trustap API can be used
    to process actual currency. This environment is available at
    `https://dev.trustap.com` and uses the `trustap` realm during
    authentication.

    Note that only your client ID will be the same in the staging and
    production Trustap API environments; your client secret and API key will
    be different in the two environments.
  contact:
    email: support@trustap.com
  version: 0.1.0
servers:
- url: https://dev.stage.trustap.com/api/v1
security:
- OAuth2: []
tags:
- name: Online Transactions
  description: |
    Online transactions are used when the goods are delivered using registered
    mail.
- name: Clients
  description: |
    Clients represent partner applications.
- name: Buyers and Sellers
  description: |
    Users represent users of the platform.
- name: Personal
  description: |
    Personal endpoints are used for managing personal details for users, for
    "Know Your Customer" requirements.
- name: Notifications
  description: |
    Notifications log updates for users.
- name: F2F Transactions
  description: |
    F2F2 transactions are used when the goods are delivered in person.
- name: F2F Payment
  description: |
    Payment endpoints for face-to-face transactions.
- name: F2F Handover
  description: |
    Handover endpoints for face-to-face transactions.
- name: F2F Complaint
  description: |
    Complaint endpoints for face-to-face transactions.
- name: F2F Cancel
  description: |
    Cancel endpoints for face-to-face transactions.
- name: F2F Buyer/Seller Details
  description: |
    User details endpoints for face-to-face transactions.
- name: Subscriptions
  description: |
    Subscriptions are used for recurring payments.
- name: F2F Multi-use Listings
  description: |
    These endpoints are no longer supported. We do not recommend using these
    endpoints.
- name: F2F Single-use Listings
  description: |
    These endpoints are no longer supported. We do not recommend using these
    endpoints.
- name: Online Multi-use Listings
  description: |
    These endpoints are no longer supported. We do not recommend using these
    endpoints.
- name: Online Single-use Listings
  description: |
    These endpoints are no longer supported. We do not recommend using these
    endpoints.
- name: Trustap lite
  description: |
    Endpoints for Trustap lite
paths:
  /batch/transactions:
    get:
      tags:
      - Online Transactions
      summary: Get multiple online transactions by their IDs
      description: |
        This endpoint takes a required `ids` parameter that contains a
        comma-separated list of transaction IDs, and returns the
        transactions corresponding to those IDs. A maximum of 50 IDs may
        be provided, results are returned in the order specified in
        `ids`, and duplicates are preserved. Transactions that couldn't
        be found will be returned as `null` values in the result array.
        The following example request results in the `200 OK` response
        described below, assuming that the transaction with ID `1990`
        couldn't be found:

        ``` http
        https://dev.stage.trustap.com/api/v1/batch/transactions?ids=1309,609,1990,609
        ```
      operationId: basic.getTransactionsByIds
      parameters:
      - name: ids
        in: query
        description: |
          A comma-separated list of transaction IDs
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `ids_missing`
              * `invalid_id`
              * `too_many_ids`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /charge:
    get:
      tags:
      - Online Payment
      summary: Get the Trustap fee for an online transaction
      description: |
        This returns the Trustap fee, in the `currency`'s smallest unit,
        for a transaction involving goods with the supplied `price`. See
        [the Stripe
        documentation](https://stripe.com/docs/currencies#zero-decimal)
        for more details.
      operationId: basic.getCharge
      parameters:
      - name: currency
        in: query
        description: |
          The currency that the `price` is specified in.
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: price
        in: query
        description: |
          The price of the goods being sold in this transaction, in
          the `currency`'s smallest unit. For example, if a trading
          card is being sold for $12.34 (with `currency` as `usd`),
          then the request for the charge for this transaction would
          be `/charge?price=1234&currency=usd`.
        required: true
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: quantity
        in: query
        description: |
          When creating transactions from a multi-use listing, the
          `quantity` parameter can be provided in order to generate a
          charge for the given price multiplied by the given quantity.
          See `/multi_use_listings/{listingId}/create_transaction`
          for more details.
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: payment_method
        in: query
        description: |
          The payment method that will be used to pay for the
          transaction. This is necessary because different payment
          methods may result in different fees.

          The default value is `card`.
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: use_hr_post
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: boolean
      - name: postage_fee
        in: query
        description: The custom `postage_fee` for the transaction.
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: charge_config
        in: query
        description: |
          The charge config for which the charge amount is computed.
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
          default: 1
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Charge'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `currency_missing`
              * `invalid_price`
              * `negative_price`
              * `price_too_low`
              * `unsupported_currency`
              * `invalid_charge_config`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
      - OAuth2: []
      - APIKey: []
  /client/supported_registration_countries:
    get:
      tags:
      - Clients
      summary: Get supported registration countries for the current client
      operationId: client.getSupportedRegistrationCountries
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
  /clients/{client_id}/transactions:
    post:
      summary: Get transactions by page
      operationId: basic_client.getTransactions
      parameters:
      - name: client_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: page
        in: query
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int64
      - name: page_size
        in: query
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                carrier:
                  type: string
                currency:
                  type: string
                date_created_from:
                  type: string
                date_created_to:
                  type: string
                date_funds_released_from:
                  type: string
                descr:
                  type: string
                exclude_status:
                  type: string
                handle_tracking:
                  type: boolean
                quantity:
                  type: integer
                search_by_user_ids:
                  type: array
                  items:
                    type: string
                sort_by_name:
                  type: string
                sort_by_order:
                  type: string
                statuses:
                  type: array
                  items:
                    type: string
                total_price:
                  type: string
                tracking_code:
                  type: string
                tx_id:
                  type: integer
        required: true
      responses:
        "200":
          description: Returns paginated list of transactions for a client
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.TransactionPage'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `invalid_page`
              * `page_value_too_low`
              * `invalid_page_size`
              * `excessive_page_size`
              * `page_size_value_too_low`
              * `sort_by_incorrect_format`
          content: {}
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: body
  /clients/{client_id}/transactions/{transaction_id}:
    get:
      tags:
      - Online Transactions
      summary: Get an online transaction by its ID as a specific client
      operationId: basic_client.getTransaction
      parameters:
      - name: client_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: Unauthorized
          content: {}
        "404":
          description: Not Found
          content: {}
  /guest_users:
    post:
      tags:
      - Buyers and Sellers
      summary: Create a new guest user
      description: "This endpoint creates guest user which can be used as the buyer\
        \ or the seller.\nIf guest user is used as the seller in a transaction, they\
        \ need to be created with\n`country_code` parameter correctly set. This is\
        \ important because of currencies\nthey can use in their transactions.\n`tos_acceptance`\
        \ is the parameter which is important for disputes/chargeback and \nrepresent\
        \ the timestamp when Trustap ToS were accepted https://www.trustap.com/terms.\n"
      operationId: users.createGuestUser
      requestBody:
        content:
          application/json:
            schema:
              required:
              - email
              - first_name
              - last_name
              - tos_acceptance
              type: object
              properties:
                country_code:
                  type: string
                email:
                  minLength: 1
                  type: string
                first_name:
                  minLength: 1
                  type: string
                last_name:
                  minLength: 1
                  type: string
                tos_acceptance:
                  $ref: '#/components/schemas/users.TosAcceptance'
              example:
                country_code: IE
                email: guest@test.com
                first_name: Test
                last_name: User
                tos_acceptance:
                  ip: 192.168.1.2
                  unix_timestamp: 1672531200
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/users.GuestUser'
        "400":
          description: |
            Bad Request
              `code` can be one of the following:
                * `email_missing`
                * `first_name_missing`
                * `last_name_missing`
                * `tos_acceptance_ip_missing`
                * `invalid_country_code`
                * `invalid_email`
                * `invalid_tos_acceptance_date`
          content: {}
      x-codegen-request-body-name: create_guest_user_body
  /me/account_session:
    get:
      tags:
      - Personal
      summary: Create an account session and retrieve the client secret for it
      operationId: personal.getAccountSession
      responses:
        "201":
          description: OK
          content:
            application/json:
              schema:
                required:
                - client_secret
                type: object
                properties:
                  client_secret:
                    type: string
                example:
                  client_secret: accs_secret__***********************************************
  /me/balances:
    get:
      tags:
      - Buyers and Sellers
      summary: Get the balance for the current user in each currency
      operationId: users.getBalances
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/users.Balances'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /me/carriers/{carrier_id}/facilities:
    get:
      tags:
      - Online Shipping
      summary: Get the list of facilities for a given carrier
      operationId: basic.getCarrierFacilityOptions
      parameters:
      - name: carrier_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - country_code
              - delivery_type
              - search_text
              type: object
              properties:
                country_code:
                  type: string
                  description: |
                    ISO 3166-1 alpha-2 country code.
                delivery_type:
                  type: string
                  description: |
                    The type of delivery or collection method we want to get options from.
                    `delivery_type` can be one of the following:
                    * `parcel_locker`
                    * `post_office`
                search_text:
                  type: string
                  description: |
                    Filter text that is used to search available facilities.
                    It can include `City`, `Postal Code` or a string contained within Facility name.
              example:
                country: HR
                delivery_type: parcel_locker
                search_text: Zagreb
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                example:
                  address: "123 Street 1 Zabreb, Croatia"
                  city: Zagreb
                  facility_type: post_office
                  name: Zagreb Main Office
                  postal_code: 123456HR
                items:
                  $ref: '#/components/schemas/basic.CarrierFacility'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:
              * `invalid_carrier`
              * `invalid_delivery_type`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: get_carrier_facility_options
  /me/debit_account:
    get:
      tags:
      - Personal
      summary: Get debit account details
      operationId: personal.getDebitAccount
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personal.DebitAccount'
    post:
      tags:
      - Personal
      summary: Set debit account details
      operationId: personal.setDebitAccount
      requestBody:
        content:
          application/json:
            schema:
              required:
              - type
              type: object
              properties:
                bank_details:
                  $ref: '#/components/schemas/personal.BankDetails'
                bank_token:
                  type: string
                card_details:
                  type: string
                type:
                  type: string
                  enum:
                  - bank
                  - bank_token
                  - card
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personal.DebitAccount'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `routing_number_invalid`: The routing number is invalid.
              * `account_number_invalid`: The account number is invalid.
              * `parameter_missing`: Parameter is missing.
              * `invalid_account_type`: The given debit account type is invalid.
              * `bank_account_unusable`: The bank account is unusable.
              * `bank_details_missing`: The bank details are missing.
              * `bank_token_missing`: The bank token is missing.
              * `card_details_missing`: The card details are missing.
          content: {}
      x-codegen-request-body-name: set_debit_account_body
  /me/features:
    get:
      tags:
      - Buyers and Sellers
      summary: Get the status enabled/disabled of user's features
      operationId: users.getUserFeatures
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/users.Features'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /me/features/instant_payouts:
    post:
      tags:
      - Buyers and Sellers
      summary: Allow users to turn instant payouts feature on/off
      operationId: users.setInstantPayouts
      requestBody:
        content:
          application/json:
            schema:
              required:
              - enabled
              type: object
              properties:
                enabled:
                  type: boolean
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/users.Features'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: set_instant_payouts_body
  /me/instant_payout_balance:
    get:
      tags:
      - Personal
      summary: Get instant payout balance
      operationId: personal.getInstantPayoutBalance
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personal.InstantPayoutBalance'
  /me/multi_use_listings/create:
    post:
      tags:
      - Online Multi-use Listings
      summary: Create a new multi-use listing for the logged-in user
      description: |
        Multi-use listings are disabled once payment has been submitted
        for a transaction created from it.
        Offline access is allowed for this endpoint when the user has
        granted the `basic_ls:offline_create` scope to the client
        that is performing the request.
      operationId: basic.createMultiUseListing
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge
              - charge_calculator_version
              - currency
              - description
              - price
              - role
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a request to
                    `/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
                role:
                  $ref: '#/components/schemas/basic.Role'
              example:
                charge: 78
                charge_calculator_version: 5
                currency: eur
                description: Soccer ticket
                price: 1234
                role: seller
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.MultiUseListing'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_role`: '' is not a valid role
              * `incorrect_charge`
              * `incorrect_charge_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      deprecated: true
      x-codegen-request-body-name: create_multi_use_listing_body
  /me/notifications:
    get:
      tags:
      - Notifications
      summary: Get the notifications for the logged-in user
      operationId: app_notifs.getNotifications
      parameters:
      - name: before_id
        in: query
        description: |
          Only return transactions that were created chronologically
          before the transaction with this ID
        required: false
        style: form
        explode: true
        schema:
          minimum: 0
          type: integer
          format: int64
      - name: after_id
        in: query
        description: |
          Only return notifications that were created chronologically
          after the notification with this ID (i.e. with smaller IDs)
        required: false
        style: form
        explode: true
        schema:
          minimum: 0
          type: integer
          format: int64
      - name: limit
        in: query
        description: |
          The maximum number of notifications to return
        required: false
        style: form
        explode: true
        schema:
          maximum: 50
          minimum: 1
          type: integer
          format: int64
          default: 25
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/app_notifs.Notification'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_before_id`
              * `invalid_after_id`
              * `invalid_limit`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /me/payout_attempts:
    get:
      tags:
      - Personal
      summary: Get the payout attempts that have occurred for this account
      description: |
        Payout attempts are returned in reverse chronological order -
        the first attempt in the returned array will be the most recent
        payout attempt.
      operationId: personal.getPayoutAttempts
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/personal.PayoutAttempt'
  /me/personal/additional_identity_document/verification_status:
    get:
      tags:
      - Personal
      summary: Get the verification status for the front side of the secondary identity
        document
      operationId: getAdditionalIdentityDocumentVerificationStatus
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentVerification'
  /me/personal/additional_identity_document_back/verification_status:
    get:
      tags:
      - Personal
      summary: Get the verification status for the back side of the secondary identity
        document
      operationId: getAdditionalIdentityDocumentBackVerificationStatus
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentVerification'
  /me/personal/details:
    get:
      tags:
      - Personal
      summary: Get personal details for the local user
      operationId: personal.getDetails
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personal.Details'
    patch:
      tags:
      - Personal
      summary: Set personal details for the local user
      operationId: personal.setDetails
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                address_city:
                  type: string
                address_line1:
                  type: string
                address_line2:
                  type: string
                address_postal_code:
                  type: string
                address_state:
                  type: string
                dob:
                  required:
                  - day
                  - month
                  - year
                  type: object
                  properties:
                    day:
                      type: integer
                    month:
                      type: integer
                    year:
                      type: integer
                id_number:
                  type: string
                  description: The full ID number for this user.
                  nullable: true
                name_first:
                  type: string
                name_last:
                  type: string
                phone:
                  required:
                  - dial_code
                  - dial_code_country
                  - number
                  type: object
                  properties:
                    dial_code:
                      type: string
                    dial_code_country:
                      type: string
                      description: "This field is mostly non-functional, but is instead\
                        \ used to render the dial code for the user. This field is\
                        \ necessary because different countries may use the same dial\
                        \ code (for example, the US and Canada)."
                    number:
                      type: string
                  nullable: true
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personal.Details'
      x-codegen-request-body-name: set_details
  /me/personal/identity_document/verification_status:
    get:
      tags:
      - Personal
      summary: Get the verification status for the front side of the primary identity
        document
      operationId: getIdentityDocumentVerificationStatus
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentVerification'
  /me/personal/identity_document_back/verification_status:
    get:
      tags:
      - Personal
      summary: Get the verification status for the back side of the primary identity
        document
      operationId: getIdentityDocumentBackVerificationStatus
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DocumentVerification'
  /me/personal/stripe_publishable_key:
    get:
      tags:
      - Personal
      summary: |
        Get the details for the Stripe publishable key the user is linked to
      description: |
        Returns the Publishable Key for the Stripe Platform
        which the user is linked to.
      operationId: getStripePublishableKeyForUser
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  publishable_key:
                    type: string
                example:
                  publishable_key: pk_xXxXxXxXxXx
  /me/profile/payout_status:
    get:
      tags:
      - Personal
      summary: |
        Get the status of a user's ability to accept payouts
      description: |
        This endpoint requires
        the user identified by the `Trustap-User` header to have granted the `profile`
        scope to the client that is performing the request. Offline access is allowed for this endpoint when the user has
        granted the `profile` scope to the client
        that is performing the request.
      operationId: getProfilePayoutStatus
      parameters:
      - name: Trustap-User
        in: header
        description: "Required in client flows, where you make API calls on behalf\
          \ of another Trustap user."
        required: false
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfilePayoutStatus'
      security:
      - APIKey: []
      - OAuth2: []
  /me/single_use_listings/create:
    post:
      tags:
      - Online Single-use Listings
      summary: Create a new single-use listing for the logged-in user
      description: |
        Single-use listings are disabled once payment has been submitted
        for a transaction created from it.
        Offline access is allowed for this endpoint when the user has
        granted the `basic_ls:offline_create` scope to the client
        that is performing the request.
      operationId: basic.createSingleUseListing
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge
              - charge_calculator_version
              - currency
              - description
              - price
              - role
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a request to
                    `/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
                role:
                  $ref: '#/components/schemas/basic.Role'
              example:
                charge: 78
                charge_calculator_version: 5
                currency: eur
                description: Soccer ticket
                price: 1234
                role: seller
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.SingleUseListing'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_role`: '' is not a valid role
              * `incorrect_charge`
              * `incorrect_charge_seller`
          content: {}
      deprecated: true
      x-codegen-request-body-name: create_single_use_listing_body
  /me/stripe_financial_connections/add_account:
    post:
      tags:
      - Personal
      summary: Add a new payout method to the current account using a payment method
        ID
      operationId: personal.addStripeFinancialConnectionsAccount
      requestBody:
        content:
          application/json:
            schema:
              required:
              - payment_method_id
              type: object
              properties:
                payment_method_id:
                  type: string
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/personal.DebitAccount'
      x-codegen-request-body-name: body
  /me/stripe_financial_connections/ownership:
    get:
      tags:
      - Personal
      summary: Get the ownership details from the given SetupIntent using Stripe Financial
        Connections
      operationId: personal.getStripeFinancialConnectionsOwnership
      parameters:
      - name: setup_intent_id
        in: query
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - email
                - name
                - raw_address
                - raw_phone
                type: object
                properties:
                  email:
                    type: string
                  name:
                    type: string
                  raw_address:
                    type: string
                  raw_phone:
                    type: string
        "409":
          description: |
            Conflict

            `code` can be one of the following:

              * `unconfirmed_setup_intent`: The given SetupIntent has not
                been confirmed
          content: {}
  /me/stripe_financial_connections/prepare_account:
    post:
      tags:
      - Personal
      summary: |
        Get a SetupIntent ID and secret for starting a Stripe Financial
        Connections session
      operationId: personal.prepareStripeFinancialConnectionsAccount
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - setup_intent_client_secret
                - setup_intent_id
                type: object
                properties:
                  setup_intent_client_secret:
                    type: string
                  setup_intent_id:
                    type: string
  /me/transactions:
    get:
      tags:
      - Online Transactions
      summary: Get online transactions for the logged-in user
      description: |
        Transactions are currently sorted by ID.
      operationId: basic.getTransactions
      parameters:
      - name: before_id
        in: query
        description: |
          Only return transactions that were created chronologically
          before the transaction with this ID
        required: false
        style: form
        explode: true
        schema:
          minimum: 0
          type: integer
          format: int64
      - name: after_id
        in: query
        description: |
          Only return transactions that were created chronologically
          after the transaction with this ID (i.e. with smaller IDs)
        required: false
        style: form
        explode: true
        schema:
          minimum: 0
          type: integer
          format: int64
      - name: limit
        in: query
        description: |
          The maximum number of transactions to return
        required: false
        style: form
        explode: true
        schema:
          maximum: 50
          minimum: 1
          type: integer
          format: int64
          default: 25
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                example:
                - charge: 78
                  charge_seller: 0
                  created: 2019-12-25T09:00:00Z
                  currency: eur
                  description: Soccer ticket
                  id: 1309
                  join_code: 54c5bb89-a5ea-4be7-ad7a-e740c2eebab4
                  price: 1234
                  seller_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
                  status: created
                - buyer_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
                  charge: 78
                  charge_seller: 0
                  created: 2018-12-25T09:00:00Z
                  currency: eur
                  description: Soccer ticket
                  id: 609
                  join_code: c9cd6a9d-1096-4d38-b4aa-2c354beac845
                  price: 1234
                  status: created
                items:
                  $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_before_id`
              * `invalid_after_id`
              * `invalid_limit`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
      - Online Transactions
      summary: Create a new online transaction
      description: |
        A request to this endpoint must be preceded by a call to
        `/charge` with the price of the goods specified in `price`.
      operationId: basic.createTransaction
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge
              - charge_calculator_version
              - currency
              - description
              - price
              - role
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_config:
                  type: integer
                  description: |
                    The charge config for which the charge amount is computed.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The seller `charge` value returned from a
                    request to `/charge`.
                  format: int64
                client_id:
                  type: string
                currency:
                  type: string
                  description: |
                    The currency that the `price` is specified in.
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                features:
                  type: array
                  description: |
                    `features` contains flags that modify the
                    transaction flow.
                  items:
                    $ref: '#/components/schemas/basic.Feature'
                payment_method:
                  type: string
                  description: |
                    The payment method to use for the transaction.
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
                role:
                  $ref: '#/components/schemas/basic.Role'
              example:
                charge: 78
                charge_seller: 0
                client_id: test-auth
                created: 2025-08-28T11:47:44.134539654Z
                currency: eur
                description: Little Fish
                id: 1
                is_payment_in_progress: false
                join_code: 02e591b3-e80d-4ed8-927e-743df1a0cc22
                price: 1234
                quantity: 1
                seller_id: 45e2537a-a9f4-4b4e-9f90-3761cfd4f35b
                status: created
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `incorrect_calc_version`
              * `incorrect_charge`
              * `incorrect_charge_seller`
              * `invalid_calc_version`
              * `negative_price`
              * `price_too_low`
              * `invalid_charge_config`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: create_transaction_body
  /me/transactions/create_and_join:
    post:
      tags:
      - Online Transactions
      summary: Create a new online transaction with both users
      description: |
        This endpoint is an optimised call that allows a transaction to
        be created and joined in a single request. It requires the user
        identified by `join_user_id` to have granted the
        `basic_tx:offline_create_join` scope to the client that is
        performing the request.
      operationId: basic.createAndJoinTransaction
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge
              - charge_calculator_version
              - creator_role
              - currency
              - description
              - join_user_id
              - price
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_config:
                  type: integer
                  description: |
                    The charge config for which the charge amount is computed.
                  format: int64
                  default: 1
                charge_seller:
                  type: integer
                  description: |
                    The seller `charge` value returned from a request to
                    `/charge`.
                  format: int64
                client_id:
                  type: string
                creator_role:
                  $ref: '#/components/schemas/basic.Role'
                currency:
                  type: string
                  description: |
                    The currency that the `price` is specified in.
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                features:
                  type: array
                  description: |
                    `features` contains flags that modify the
                    transaction flow.
                  items:
                    $ref: '#/components/schemas/basic.Feature'
                join_user_id:
                  type: string
                  description: |
                    The user that will be joined to the new
                    transaction when it is created. It cannot be the
                    ID of the user making the request.
                payment_method:
                  type: string
                  description: |
                    The payment method to use for the transaction.
                postage_fee:
                  type: integer
                  description: The custom `postage_fee` for the transaction.
                  format: int64
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
              example:
                charge: 78
                charge_calculator_version: 5
                charge_config: 1
                creator_role: seller
                currency: eur
                description: Soccer ticket
                join_user_id: feb33a87-3917-4538-9260-127c8a6b5232
                payment_method: bank_transfer
                price: 1234
                role: seller
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_join_user_id`
              * `duplicate_user_id`: The user specified by
                `join_user_id` is the user making the request.
              * `incorrect_calc_version`
              * `incorrect_charge`
              * `incorrect_charge_seller`
              * `unsupported_currency`
              * `user_not_owned_by_client`
              * `invalid_calc_version`
              * `negative_price`
              * `price_too_low`
              * `user_already_joined`
              * `already_cancelled`
              * `feature_not_found`
              * `invalid_charge_config`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: create_transaction_body
  /me/transactions/create_with_guest_user:
    post:
      tags:
      - Online Transactions
      summary: Create a new online transaction with both users
      description: |
        This endpoint is an optimised call that allows a transaction to
        be created and joined in a single request. It requires the
        online user to have granted the `basic_tx:offline_create_join` scope
        to the client that is performing the request.
        This endpoint allows creating a transaction with both buyer and seller
        as guest or full users, or one party to be guest user and the other full user.
      operationId: basic.createTransactionWithGuestUser
      requestBody:
        content:
          application/json:
            schema:
              required:
              - buyer_id
              - charge
              - charge_calculator_version
              - creator_role
              - currency
              - description
              - price
              - seller_id
              type: object
              properties:
                buyer_id:
                  type: string
                  description: |
                    The id of the buyer for this transaction
                    (it can be full user id or guest user id).
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_config:
                  type: integer
                  description: |
                    The charge config for which the charge amount is computed.
                  format: int64
                  default: 1
                charge_seller:
                  type: integer
                  description: |
                    The seller `charge` value returned from a
                    request to `/charge`.
                  format: int64
                client_id:
                  type: string
                creator_role:
                  $ref: '#/components/schemas/basic.Role'
                currency:
                  $ref: '#/components/schemas/Currency'
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                features:
                  type: array
                  description: |
                    `features` contains flags that modify the
                    transaction flow.
                  items:
                    $ref: '#/components/schemas/basic.Feature'
                image_url:
                  maxLength: 2047
                  type: string
                  description: |
                    URL of the image displayed on the Trustap payment page to show the buyer
                    the item they are paying for.
                    Supports jpg, png, gif, bmp, webp and svg files. Images displayed as a
                    squares. Non-square images are cropped.
                  format: absolute_url
                payment_method:
                  type: string
                  description: |
                    The payment method to use for the transaction.
                postage_fee:
                  type: integer
                  description: |
                    The custom `postage fee`, this fee only applies in the case
                    `postage fee feature flag` is enabled.
                  format: int64
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
                seller_id:
                  type: string
                  description: |
                    The id of the seller for this transaction
                    (it can be full user id or guest user id).
              example:
              - buyer_id: 1-bd5bb99j-95bf-87e2-ce0d-95e7541c6ad5
                charge: 78
                charge_calculator_version: 5
                charge_config: 1
                charge_seller: 0
                creator_role: seller
                currency: eur
                description: Soccer ticket
                payment_method: bank_transfer
                price: 1234
                seller_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:
              * `incorrect_calc_version`
              * `incorrect_charge`
              * `incorrect_charge_seller`
              * `invalid_calc_version`
              * `negative_price`
              * `price_too_low`
              * `incompatible_countries`
              * `unsupported_currency`
              * `invalid_role`
              * `no_guest_user`
              * `invalid_charge_config`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
              * `invalid_image_url`
              * `image_url_too_long`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: create_transaction_with_guest_user_body
  /me/verification_method:
    get:
      tags:
      - Personal
      summary: |
        Create verification method and message if not available
      operationId: personal.getVerificationMethod
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - message
                - verification_method
                type: object
                properties:
                  message:
                    type: string
                  verification_method:
                    type: string
                example:
                  message: not_available
                  verification_method: stripe_identity
        "409":
          description: |
            Conflict

            `code` can be one of the following:

              * `user_is_company`: Verification sessions aren't yet supported
                for users with a `business_type` of `company`.
          content: {}
  /me/verification_session:
    get:
      tags:
      - Personal
      summary: |
        Create verification session and retrieve client secret for it
      description: Offline access is allowed for this endpoint when the user has granted
        the `profile` scope to the client that is performing the request.
      operationId: personal.getVerificationSession
      responses:
        "201":
          description: OK
          content:
            application/json:
              schema:
                required:
                - verification_session_client_secret
                type: object
                properties:
                  verification_session_client_secret:
                    type: string
                example:
                  verification_session_client_secret: vs_1P**********************_******_****_********************************************************************************0PVs
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `stripe_identity_not_available`: stripe identity is currently not available for this account.
          content: {}
        "409":
          description: |
            Conflict

            `code` can be one of the following:

              * `user_is_company`: Verification sessions aren't yet supported
                for users with a `business_type` of `company`.
          content: {}
  /me/verification_session_native:
    get:
      tags:
      - Personal
      summary: Create verification session for native apps that use Stripe native
        SDK
      description: "Creates verification session for native apps that use Stripe native\
        \ SDK, \nand returns it's `Verification Session ID` with appropriate `Ephemeral\
        \ Key`.\nOffline access is allowed for this endpoint when the user has\ngranted\
        \ the `profile` scope to the client that is performing the request.\n"
      operationId: personal.getVerificationSessionNative
      responses:
        "201":
          description: OK
          content:
            application/json:
              schema:
                required:
                - ephemeral_key
                - verification_session_id
                type: object
                properties:
                  ephemeral_key:
                    type: string
                  verification_session_id:
                    type: string
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `stripe_identity_not_available`: stripe identity is currently not available for this account.
          content: {}
        "409":
          description: |
            Conflict

            `code` can be one of the following:

              * `user_is_company`: Verification sessions aren't yet supported
                for users with a `business_type` of `company`.
          content: {}
  /me/verification_status:
    get:
      tags:
      - Personal
      summary: |
        Get verification status of the user
      description: Offline access is allowed for this endpoint when the user has granted
        the `profile` scope to the client that is performing the request.
      operationId: personal.getVerificationStatus
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - verification_session_id
                - verification_session_status
                type: object
                properties:
                  verification_session_id:
                    type: string
                  verification_session_last_error:
                    $ref: '#/components/schemas/personal.VerificationSessionLastError'
                  verification_session_status:
                    type: string
                example:
                  verification_session_id: vs_1PH0bmDnTEntFpTD2xDXZy9t
                  verification_session_status: created
  /multi_use_listings/{listing_id}:
    get:
      tags:
      - Online Multi-use Listings
      summary: Get a listing by its ID
      operationId: basic.getMultiUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.MultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
    delete:
      tags:
      - Online Multi-use Listings
      summary: Delete this listing
      operationId: basic.deleteMultiUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: No Content
          content: {}
        "404":
          description: Not Found
          content: {}
      deprecated: true
    patch:
      tags:
      - Online Multi-use Listings
      summary: Patch listing properties
      operationId: basic.updateMultiUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a request to
                    `/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                description:
                  type: string
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
              example:
                charge: 78
                charge_calculator_version: 5
                currency: eur
                description: Soccer ticket
                price: 1234
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.MultiUseListing'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `empty_body`: The request body is empty.
              * `partial_pricing`: When updating a pricing field, all 3 of
                `currency`, `price` and `charge` must be supplied.
          content: {}
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: patch_listing_body
  /multi_use_listings/{listing_id}/create_transaction:
    post:
      tags:
      - Online Multi-use Listings
      summary: Create a transaction from this listing
      description: |
        Calling `/create_transaction` with no parameters will create a
        new transaction with the details provided by the listing.

        The optional `quantity` parameter can be passed to create a
        transaction for a multiple of the original listing. In this
        case, the `price` and `charge` for the new transaction will also
        need to be passed.

        As an example, consider a listing for a chair with a price of
        `1234` `EUR`. If a user wants to buy 10 of these in a single
        transaction then the charge for the total can be retrieved using
        `GET /charge?price=1234&currency=usd&quantity=10` (note the
        addition of the optional quantity parameter at the end). This
        will return a `price` of `12340` and an associated `charge`.
        These new values must then be passed to `/create_transaction`
        with `quantity=10`, which will create a new transaction with the
        new pricing information. The new transaction will also include a
        `quantity` field, which doesn't have a functional effect on the
        transaction, but is included for informational purposes.

        Note that this functionality is not available for single-use
        listings, from which only singular transactions may be created.
      operationId: basic.createTransactionFromMultiUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: quantity
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: price
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: charge
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: payment_method
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: charge_config
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `listing_is_disabled`
              * `no_listing_currency`: The source listing doesn't
                have a currency.
              * `no_listing_price`: The source listing doesn't
                have pricing.
              * `no_listing_descr`: The source listing doesn't have
                a description.
              * `is_listing_creator`: The current user created this
                listing.
              * `invalid_charge_config`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /multi_use_listings/{listing_id}/create_transaction_with_guest_buyer:
    post:
      tags:
      - Online Multi-use Listings
      summary: Create a transaction from this listing
      operationId: basic.createTransactionWithGuestBuyerFromMultiUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `listing_is_disabled`
              * `no_listing_currency`: The source listing doesn't
                have a currency.
              * `no_listing_price`: The source listing doesn't
                have pricing.
              * `no_listing_descr`: The source listing doesn't have
                a description.
              * `is_listing_creator`: The current user created this
                listing.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /multi_use_listings/{listing_id}/disable:
    post:
      tags:
      - Online Multi-use Listings
      summary: Disable this listing
      description: |
        Calling `/create_transaction` on a disabled listing will return
        a `400` response.
      operationId: basic.disableMultiUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.MultiUseListing'
        "404":
          description: Not found
          content: {}
      deprecated: true
  /multi_use_listings/{listing_id}/enable:
    post:
      tags:
      - Online Multi-use Listings
      summary: Enable this listing
      operationId: basic.enableMultiUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.MultiUseListing'
        "404":
          description: Not found
          content: {}
      deprecated: true
  /multi_use_listings/{listing_id}/set_description:
    post:
      tags:
      - Online Multi-use Listings
      summary: Set description for this listing
      operationId: basic.setMultiUseListingDescription
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Soccer ticket
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.MultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: description_body
  /multi_use_listings/{listing_id}/set_pricing:
    post:
      tags:
      - Online Multi-use Listings
      summary: Set pricing for this listing
      operationId: basic.setMultiUseListingPricing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge
              - charge_calculator_version
              - currency
              - price
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a
                    request to `/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
              example:
                charge: 78
                charge_calculator_version: 5
                currency: eur
                price: 1234
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.MultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: create_pricing_body
  /notifications/{notification_id}:
    get:
      tags:
      - Notifications
      summary: Get a notification by its ID
      operationId: app_notifs.getNotification
      parameters:
      - name: notification_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app_notifs.Notification'
        "404":
          description: Not Found
          content: {}
  /notifications/{notification_id}/mark_as_read:
    post:
      tags:
      - Notifications
      summary: Mark this notification as read
      operationId: app_notifs.markNotificationAsRead
      parameters:
      - name: notification_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/app_notifs.Notification'
        "404":
          description: Not Found
          content: {}
  /p2p/batch/transactions:
    get:
      tags:
      - F2F Transactions
      summary: Get multiple face-to-face transactions by their IDs
      description: |
        This endpoint takes a required `ids` parameter that contains a
        comma-separated list of transaction IDs, and returns the
        transactions corresponding to those IDs. A maximum of 50 IDs may
        be provided, and results are returned in the order specified in
        `ids`, and duplicates are preserved. Transactions that couldn't
        be found will be returned as `null` values in the result array.
        The following example request results in the `200 OK` response
        described below, assuming that the transaction with ID `1990`
        couldn't be found:


        ``` http
        https://dev.stage.trustap.com/api/v1/p2p/batch/transactions?ids=1309,609,1990,609
        ```
      operationId: getP2pTransactionsByIds
      parameters:
      - name: ids
        in: query
        description: |
          A comma-separated list of transaction IDs
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `ids_missing`
              * `invalid_id`
              * `too_many_ids`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /p2p/charge:
    get:
      tags:
      - F2F Payment
      summary: Get the Trustap fee for a face-to-face transaction
      description: |
        This returns the Trustap fee, in the `currency`'s smallest unit,
        for a transaction involving goods with the supplied `price`. See
        [the Stripe
        documentation](https://stripe.com/docs/currencies#zero-decimal)
        for more details.
      operationId: p2p.getCharge
      parameters:
      - name: currency
        in: query
        description: |
          The currency that the `price` is specified in.
        required: true
        style: form
        explode: true
        schema:
          type: string
      - name: price
        in: query
        description: |
          The price of the goods being sold in this transaction, in
          the `currency`'s smallest unit. For example, if a trading
          card is being sold for $12.34 (with `currency` as `usd`),
          then the request for the charge for this transaction would
          be `/p2p/charge?price=1234&currency=usd`.
        required: true
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: fee_multiplier
        in: query
        description: |
          The `fee_multiplier` parameter is used to apply a higher percentage
          fee based on the total price of the transaction. The percentage fee
          is calculated multiplying the `percentage fee` by the `fee_multiplier`.
        required: false
        style: form
        explode: true
        schema:
          type: number
          format: double
      - name: quantity
        in: query
        description: |
          When creating transactions from a multi-use listing, the
          `quantity` parameter can be provided in order to generate a
          charge for the given price multiplied by the given quantity.
          See `/p2p/multi_use_listings/{listingId}/create_transaction`
          for more details.
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: payment_method
        in: query
        description: |
          The payment method that will be used to pay for the
          transaction. This is necessary because different payment
          methods may result in different fees.

          The default value is `card`.
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: charge_config
        in: query
        description: |
          The charge config for which the charge amount is computed.
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
          default: 1
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Charge'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `currency_missing`
              * `invalid_price`
              * `negative_price`
              * `price_too_low`
              * `unsupported_currency`
              * `invalid_charge_config`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
      - OAuth2: []
      - APIKey: []
  /p2p/clients/{client_id}/transactions:
    post:
      summary: Get p2p transactions by page for a client
      operationId: p2p_client.getTransactions
      parameters:
      - name: client_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: page
        in: query
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int64
      - name: page_size
        in: query
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                currency:
                  type: string
                date_created_from:
                  type: string
                date_created_to:
                  type: string
                date_funds_released_from:
                  type: string
                descr:
                  type: string
                exclude_status:
                  type: string
                quantity:
                  type: integer
                search_by_user_ids:
                  type: array
                  items:
                    type: string
                skip_remainder:
                  type: boolean
                sort_by_name:
                  type: string
                sort_by_order:
                  type: string
                statuses:
                  type: array
                  items:
                    type: string
                total_price:
                  type: string
                tx_id:
                  type: integer
        required: true
      responses:
        "200":
          description: Returns paginated list of p2p transactions for a client
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.TransactionPage'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `invalid_page`
              * `page_value_too_low`
              * `invalid_page_size`
              * `excessive_page_size`
              * `page_size_value_too_low`
              * `sort_by_incorrect_format`
          content: {}
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: body
  /p2p/clients/{client_id}/transactions/{transaction_id}:
    get:
      tags:
      - F2F Transactions
      summary: Get a face-to-face transaction by its ID as a specific client
      operationId: p2p_client.getTransaction
      parameters:
      - name: client_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: Unauthorized
          content: {}
        "404":
          description: Not Found
          content: {}
  /p2p/listings/create_with_seller:
    post:
      tags:
      - Trustap Lite
      summary: |
        Creates a transaction with guest seller and returns actions
        page url
      operationId: p2p.createWithSeller
      requestBody:
        content:
          application/json:
            schema:
              required:
              - ad_id
              - currency
              - description
              - seller_country_code
              - seller_email
              - value
              type: object
              properties:
                ad_id:
                  type: string
                  description: |
                    Unique ID for the product or service.
                    Not used by Trustap internally, but returned in webhook events.
                currency:
                  $ref: '#/components/schemas/p2p.Currency'
                description:
                  type: string
                  description: |
                    Description of the product or service.
                    This description is shown in all emails and payment screens.
                image_url:
                  maxLength: 2047
                  type: string
                  description: |
                    URL of the image displayed on the Trustap payment page to show the buyer
                    the item they are paying for.
                    Supports jpg, png, gif, bmp, webp and svg files. Images displayed as a
                    squares. Non-square images are cropped.
                  format: absolute_url
                seller_country_code:
                  type: string
                  description: |
                    ISO 4217 three-character currency code representing the currency of the transaction.
                seller_email:
                  type: string
                  description: |
                    Valid email address of your seller.
                    Ensure this email is correct as Trustap will send all transaction correspondence to this email.
                seller_phone_number:
                  type: string
                  description: |
                    Phone number of seller.
                value:
                  type: integer
                  description: |
                    The price of the product or service.
                    This value must be provided in a currency's smallest unit.
                  format: int64
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.ActionsUrl'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

                * `invalid_role`: '' is not a valid role
                * `invalid_image_url`: '' is not a valid image url
                * `image_url_too_long`
          content: {}
      x-codegen-request-body-name: create_with_seller_body
  /p2p/me/multi_use_listings/create:
    post:
      tags:
      - F2F Multi-use Listings
      summary: |
        Create a new multi-use, face-to-face listing for the logged-in
        user
      description: |
        Multi-use listings can be used to create transactions.
        Offline access is allowed for this endpoint when the user has
        granted the `p2p_ls:offline_create` scope to the client
        that is performing the request.
      operationId: createP2PMultiUseListingWithDetails
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge_calculator_version
              - currency
              - deposit_charge
              - deposit_price
              - description
              - role
              type: object
              properties:
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/p2p/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                deposit_price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                role:
                  $ref: '#/components/schemas/basic.Role'
                skip_remainder:
                  type: boolean
                  description: |
                    If `skip_remainder` is `true` then the
                    transaction will move to the "confirm handover"
                    step after the deposit has been accepted.
              example:
                charge_calculator_version: 5
                currency: eur
                deposit_charge: 78
                deposit_price: 1234
                description: Soccer ticket
                role: seller
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PMultiUseListing'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

                * `invalid_role`: '' is not a valid role
          content: {}
      deprecated: true
      x-codegen-request-body-name: create_multi_use_listing_body
  /p2p/me/single_use_listings/create:
    post:
      tags:
      - F2F Single-use Listings
      summary: |
        Create a new single-use, face-to-face listing for the logged-in
        user
      description: |
        Single-use listings are disabled once the remainder has been
        paid for a transaction created from it.
        Offline access is allowed for this endpoint when the user has
        granted the `p2p_ls:offline_create` scope to the client
        that is performing the request.
      operationId: createP2PSingleUseListingWithDetails
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge_calculator_version
              - currency
              - deposit_charge
              - deposit_price
              - description
              - role
              type: object
              properties:
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/p2p/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                deposit_price:
                  type: integer
                  description: |
                    The deposit price of the goods being sold, in
                    the `currency`'s smallest unit.  The `charge`
                    value should correspond to the Trustap charge
                    created with this price, otherwise this request
                    will fail with a `400` error.
                  format: int64
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                role:
                  $ref: '#/components/schemas/basic.Role'
                skip_remainder:
                  type: boolean
                  description: |
                    If `skip_remainder` is `true` then the
                    transaction will move to the "confirm handover"
                    step after the deposit has been accepted.
              example:
                charge_calculator_version: 5
                currency: eur
                deposit_charge: 78
                deposit_price: 1234
                description: Soccer ticket
                role: seller
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PSingleUseListing'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

                * `invalid_role`: '' is not a valid role
          content: {}
      deprecated: true
      x-codegen-request-body-name: create_single_use_listing_body
  /p2p/me/transactions:
    get:
      tags:
      - F2F Transactions
      summary: Get face-to-face transactions for the logged-in user
      description: |
        Transactions are currently sorted by ID.
      operationId: p2p.getTransactions
      parameters:
      - name: before_id
        in: query
        description: |
          Only return transactions that were created chronologically
          before the transaction with this ID
        required: false
        style: form
        explode: true
        schema:
          minimum: 0
          type: integer
          format: int64
      - name: after_id
        in: query
        description: |
          Only return transactions that were created chronologically
          after the transaction with this ID (i.e. with smaller IDs)
        required: false
        style: form
        explode: true
        schema:
          minimum: 0
          type: integer
          format: int64
      - name: limit
        in: query
        description: |
          The maximum number of transactions to return
        required: false
        style: form
        explode: true
        schema:
          maximum: 50
          minimum: 1
          type: integer
          format: int64
          default: 25
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                example:
                - client_id: test-auth
                  created: 2025-11-03T09:37:47Z
                  currency: eur
                  deposit_pricing:
                    charge: 118
                    charge_seller: 0
                    price: 1234
                  description: Little Fish
                  id: 156
                  is_deposit_payment_in_progress: false
                  is_remainder_payment_in_progress: false
                  quantity: 1
                  seller_id: 1d9a9af7-b57b-4c48-a56f-86fe328f9682
                  seller_is_guest: false
                  skip_remainder: false
                  status: created
                - client_id: test-auth
                  created: 2025-11-03T09:37:47Z
                  currency: eur
                  deposit_pricing:
                    charge: 118
                    charge_seller: 0
                    price: 1234
                  description: Little Fish
                  id: 155
                  is_deposit_payment_in_progress: false
                  is_remainder_payment_in_progress: false
                  quantity: 1
                  seller_id: 1d9a9af7-b57b-4c48-a56f-86fe328f9682
                  seller_is_guest: false
                  skip_remainder: false
                  status: created
                items:
                  $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_before_id`
              * `invalid_after_id`
              * `invalid_limit`
              * `excessive_limit`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
      - F2F Transactions
      summary: Create a new face-to-face transaction
      description: |
        Note that this endpoint is similar to `POST /me/transactions`
        but takes `deposit_price` and `deposit_charge` fields instead of
        the `price` and `charge` fields.
        Offline access is allowed for this endpoint when the user has
        granted the `p2p_tx:offline_create_join` scope to the client
        that is performing the request.
      operationId: p2p.createTransaction
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge_calculator_version
              - currency
              - deposit_charge
              - deposit_price
              - description
              - role
              type: object
              properties:
                charge_calculator_version:
                  type: integer
                  format: int64
                client_id:
                  type: string
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  format: int64
                deposit_charge_config:
                  type: integer
                  description: |
                    The charge config for which the charge amount is computed.
                  format: int64
                deposit_charge_seller:
                  type: integer
                  format: int64
                deposit_payment_method:
                  type: string
                  description: |
                    The payment method to use for the transaction.
                deposit_price:
                  type: integer
                  format: int64
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                role:
                  $ref: '#/components/schemas/basic.Role'
                skip_remainder:
                  type: boolean
                  description: |
                    If `skip_remainder` is `true` then this
                    transaction will move to the "confirm handover"
                    step after the deposit has been accepted.
              example:
                charge_calculator_version: 2
                currency: eur
                deposit_charge: 78
                deposit_charge_config: 1
                deposit_payment_method: bank_transfer
                deposit_price: 1234
                description: Soccer ticket
                role: seller
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `incorrect_calc_version`
              * `incorrect_charge`
              * `incorrect_charge_seller`
              * `invalid_calc_version`
              * `negative_price`
              * `price_too_low`
              * `invalid_charge_config`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: create_transaction_body
  /p2p/me/transactions/create_and_join:
    post:
      tags:
      - F2F Transactions
      summary: Create a new face-to-face transaction with both users
      description: |
        This endpoint is an optimised call that allows a transaction to
        be created and joined in a single request. It requires the user
        identified by `join_user_id` to have granted the
        `p2p_tx:offline_create_join` scope to the client that is
        performing the request.

        Note that this endpoint is similar to `POST /me/transactions`
        but takes `deposit_price` and `deposit_charge` fields instead of
        the `price` and `charge` fields.
      operationId: p2p.createAndJoinTransaction
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge_calculator_version
              - creator_role
              - currency
              - deposit_charge
              - deposit_charge_seller
              - deposit_price
              - description
              - join_user_id
              type: object
              properties:
                charge_calculator_version:
                  type: integer
                  format: int64
                creator_role:
                  $ref: '#/components/schemas/p2p.Role'
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  format: int64
                deposit_charge_config:
                  type: integer
                  description: |
                    The charge config for which the charge amount is computed.
                  format: int64
                deposit_charge_seller:
                  type: integer
                  format: int64
                deposit_fee_multiplier:
                  type: number
                  description: |
                    The `fee_multiplier` parameter is used to apply a higher percentage
                    fee based on the total price of the transaction. The percentage fee
                    is calculated multiplying the `percentage fee` by the `fee_multiplier`.
                  format: double
                deposit_payment_method:
                  type: string
                  description: |
                    The payment method to use for the transaction.
                deposit_price:
                  type: integer
                  format: int64
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                join_user_id:
                  type: string
                  description: |
                    The user that will be joined to the new
                    transaction when it is created. It cannot be the
                    ID of the user making the request.
                skip_remainder:
                  type: boolean
                  description: |
                    If `skip_remainder` is `true` then the
                    transaction will move to the "confirm handover"
                    step after the deposit has been accepted.
              example:
                charge_calculator_version: 5
                client_id: test-auth
                creator_role: seller
                currency: eur
                deposit_charge: 118
                deposit_charge_config: 1
                deposit_charge_seller: 0
                deposit_payment_method: bank_transfer
                deposit_price: 1234
                description: Little Fish
                join_user_id: 2-8ab12191-7508-4efe-b65e-51d1bc440ed9
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_join_user_id`
              * `unsupported_currency`
              * `user_not_owned_by_client`
              * `duplicate_user_id`: The user specified by
              * `join_user_id` is the user making the request.
              * `incorrect_charge`
              * `incorrect_charge_seller`
              * `second_party_already_joined`
              * `duplicate_user_id`
              * `incompatible_countries`
              * `incompatible_users`
              * `negative_price`
              * `price_too_low`
              * `invalid_charge_config`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: create_transaction_body
  /p2p/me/transactions/create_with_guest_user:
    post:
      tags:
      - F2F Transactions
      summary: Create a new face-to-face transaction with both users
      description: |
        This endpoint is an optimised call that allows a transaction to
        be created and joined in a single request. It requires the
        online user to have granted the `p2p_tx:offline_create_join` scope
        to the client that is performing the request.
        This endpoint allows creating a transaction with both buyer and seller
        as guest users, or one party to be guest user and the other full user.
      operationId: p2p.createTransactionWithGuestUser
      requestBody:
        content:
          application/json:
            schema:
              required:
              - buyer_id
              - charge_calculator_version
              - creator_role
              - currency
              - deposit_charge
              - deposit_price
              - description
              - seller_id
              type: object
              properties:
                buyer_id:
                  type: string
                  description: |
                    The id of the buyer for this transaction
                    (it can be full user id or guest user id).
                charge_calculator_version:
                  type: integer
                  format: int64
                creator_role:
                  $ref: '#/components/schemas/p2p.Role'
                currency:
                  $ref: '#/components/schemas/p2p.Currency'
                deposit_charge:
                  type: integer
                  format: int64
                deposit_charge_config:
                  type: integer
                  description: |
                    The charge config for which the charge amount is computed.
                  format: int64
                deposit_charge_seller:
                  type: integer
                  format: int64
                deposit_fee_multiplier:
                  type: number
                  description: |
                    The `fee_multiplier` parameter is used to apply a higher percentage
                    fee based on the total price of the transaction. The percentage fee
                    is calculated multiplying the `percentage fee` by the `fee_multiplier`.
                  format: double
                deposit_payment_method:
                  type: string
                  description: |
                    The payment method to use for the transaction.
                deposit_price:
                  type: integer
                  format: int64
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                image_url:
                  maxLength: 2047
                  type: string
                  description: |
                    URL of the image displayed on the Trustap payment page to show the buyer
                    the item they are paying for.
                    Supports jpg, png, gif, bmp, webp and svg files. Images displayed as a
                    squares. Non-square images are cropped.
                  format: absolute_url
                seller_id:
                  type: string
                  description: |
                    The id of the seller for this transaction
                    (it can be full user id or guest user id).
                skip_remainder:
                  type: boolean
                  description: |
                    If `skip_remainder` is `true` then the
                    transaction will move to the "confirm handover"
                    step after the deposit has been accepted.
              example:
                buyer_id: 1-ef9664e4-921a-4696-8eaa-d8b2593d9ff9
                charge_calculator_version: 3
                creator_role: seller
                currency: eur
                deposit_charge: 118
                deposit_charge_config: 1
                deposit_charge_seller: 0
                deposit_payment_method: bank_transfer
                deposit_price: 1234
                description: Little Fish
                seller_id: 1-f40b6944-3c54-405e-9ae3-3fa9d2be9f91
                skip_remainder: true
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:
              * `incompatible_platforms`
              * `no_guest_user`
              * `invalid_role`
              * `incorrect_charge`
              * `unsupported_currency`
              * `fee_multiplier_too_low`
              * `negative_price`
              * `price_too_low`
              * `invalid_charge_config`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
              * `invalid_image_url`
              * `image_url_too_long`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: create_transaction_body
  /p2p/multi_use_listings/{listingId}:
    get:
      tags:
      - F2F Multi-use Listings
      summary: Get a listing by its ID
      operationId: getP2PMultiUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PMultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
    delete:
      tags:
      - F2F Multi-use Listings
      summary: Delete this listing
      operationId: deleteP2PMultiUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "204":
          description: OK
          content: {}
        "404":
          description: Not Found
          content: {}
      deprecated: true
    patch:
      tags:
      - F2F Multi-use Listings
      summary: Patch listing properties
      operationId: patchP2PMultiUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/p2p/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                deposit_price:
                  type: integer
                  description: |
                    The deposit price of the goods being sold, in
                    the `currency`'s smallest unit.  The `charge`
                    value should correspond to the Trustap charge
                    created with this price, otherwise this request
                    will fail with a `400` error.
                  format: int64
                description:
                  type: string
                skip_remainder:
                  type: boolean
              example:
                charge_calculator_version: 5
                currency: eur
                deposit_charge: 78
                deposit_price: 1234
                description: Soccer ticket
                skip_remainder: false
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PMultiUseListing'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `empty_body`: The request body is empty.
          content: {}
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: patch_listing_body
  /p2p/multi_use_listings/{listingId}/create_transaction:
    post:
      tags:
      - F2F Multi-use Listings
      summary: Create a transaction from this listing
      description: |
        Calling `/create_transaction` with no parameters will create a
        new transaction with the details provided by the listing.

        The optional `quantity` parameter can be passed to create a
        transaction for a multiple of the original listing. In this
        case, the `price` and `charge` for the new transaction will also
        need to be passed.

        As an example, consider a listing for a chair with a price of
        `1234` `EUR`. If a user wants to buy 10 of these in a single
        transaction then the charge for the total can be retrieved using
        `GET /p2p/charge?price=1234&currency=usd&quantity=10` (note the
        addition of the optional quantity parameter at the end). This
        will return a `price` of `12340` and an associated `charge`.
        These new values must then be passed to `/create_transaction`
        with `quantity=10`, which will create a new transaction with the
        new pricing information. The new transaction will also include a
        `quantity` field, which doesn't have a functional effect on the
        transaction, but is included for informational purposes.

        Note that this functionality is not available for single-use
        listings, from which only singular transactions may be created.

        Offline access is allowed for this endpoint when the user has
        granted the `p2p_tx:offline_create_join` scope to the client
        that is performing the request.
      operationId: createTransactionFromP2PMultiUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: quantity
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: price
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: charge
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `listing_is_disabled`
              * `is_listing_creator`: The current user created this
                listing.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /p2p/multi_use_listings/{listingId}/disable:
    post:
      tags:
      - F2F Multi-use Listings
      summary: Disable this listing
      description: |
        Calling `/create_transaction` on a disabled listing will return
        a `400` response.
        Offline access is allowed for this endpoint when the user has
        granted the `p2p_ls:offline_update` scope to the client
        that is performing the request.
      operationId: disableP2PMultiUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PMultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /p2p/multi_use_listings/{listingId}/enable:
    post:
      tags:
      - F2F Multi-use Listings
      summary: Enable this listing
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_ls:offline_update` scope to the client that is performing the request.
      operationId: enableP2PMultiUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PMultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /p2p/multi_use_listings/{listingId}/set_deposit_pricing:
    post:
      tags:
      - F2F Multi-use Listings
      summary: Set pricing for this listing
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_ls:offline_update` scope to the client that is performing the request.
      operationId: setP2PMultiUseListingPricing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge_calculator_version
              - currency
              - deposit_charge
              - deposit_price
              type: object
              properties:
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/p2p/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                deposit_price:
                  type: integer
                  description: |
                    The deposit price of the goods being sold, in
                    the `currency`'s smallest unit.  The `charge`
                    value should correspond to the Trustap charge
                    created with this price, otherwise this request
                    will fail with a `400` error.
                  format: int64
              example:
                charge_calculator_version: 5
                currency: eur
                deposit_charge: 78
                deposit_price: 1234
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PMultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: create_pricing_body
  /p2p/multi_use_listings/{listingId}/set_description:
    post:
      tags:
      - F2F Multi-use Listings
      summary: Set the description for this listing
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_ls:offline_update` scope to the client that is performing the request.
      operationId: setP2PMultiUseListingDescription
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Soccer ticket
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PMultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: description_body
  /p2p/multi_use_listings/{listingId}/set_skip_remainder:
    post:
      tags:
      - F2F Multi-use Listings
      summary: Set skip remainder for this listing
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_ls:offline_update` scope to the client that is performing the request.
      operationId: setP2PMultiUseListingSkipRemainder
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - skip_remainder
              type: object
              properties:
                skip_remainder:
                  type: boolean
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PMultiUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: skip_remainder_body
  /p2p/single_use_listings/{listingId}:
    get:
      tags:
      - F2F Single-use Listings
      summary: Get a listing by its ID
      operationId: getP2PSingleUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PSingleUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
    delete:
      tags:
      - F2F Single-use Listings
      summary: Delete this listing
      operationId: deleteP2PSingleUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "204":
          description: OK
          content: {}
        "404":
          description: Not Found
          content: {}
      deprecated: true
    patch:
      tags:
      - F2F Single-use Listings
      summary: Patch listing properties
      operationId: patchP2PSingleUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/p2p/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                deposit_price:
                  type: integer
                  description: |
                    The deposit price of the goods being sold, in
                    the `currency`'s smallest unit.  The `charge`
                    value should correspond to the Trustap charge
                    created with this price, otherwise this request
                    will fail with a `400` error.
                  format: int64
                description:
                  type: string
                skip_remainder:
                  type: boolean
              example:
                charge_calculator_version: 5
                currency: eur
                deposit_charge: 78
                deposit_price: 1234
                description: Soccer ticket
                skip_remainder: false
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PSingleUseListing'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `empty_body`: The request body is empty.
          content: {}
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: patch_listing_body
  /p2p/single_use_listings/{listingId}/create_transaction:
    post:
      tags:
      - F2F Single-use Listings
      summary: Create a transaction from this listing
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_tx:offline_create_join` scope to the client that is performing the
        request.
      operationId: createTransactionFromP2PSingleUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `listing_is_disabled`
              * `is_listing_creator`: The current user created this
                listing.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /p2p/single_use_listings/{listingId}/disable:
    post:
      tags:
      - F2F Single-use Listings
      summary: Disable this listing
      description: |
        Calling `/create_transaction` on a disabled listing will return
        a `400` response.
        Offline access is allowed for this endpoint when the user has
        granted the `p2p_ls:offline_update` scope to the client
        that is performing the request.
      operationId: disableP2PSingleUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PSingleUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /p2p/single_use_listings/{listingId}/enable:
    post:
      tags:
      - F2F Single-use Listings
      summary: Enable this listing
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_ls:offline_update` scope to the client that is performing the request.
      operationId: enableP2PSingleUseListing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PSingleUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /p2p/single_use_listings/{listingId}/set_deposit_pricing:
    post:
      tags:
      - F2F Single-use Listings
      summary: Set pricing for this listing
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_ls:offline_update` scope to the client that is performing the request.
      operationId: setP2PSingleUseListingPricing
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge_calculator_version
              - currency
              - deposit_charge
              - deposit_price
              type: object
              properties:
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/p2p/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                deposit_price:
                  type: integer
                  description: |
                    The deposit price of the goods being sold, in
                    the `currency`'s smallest unit.  The `charge`
                    value should correspond to the Trustap charge
                    created with this price, otherwise this request
                    will fail with a `400` error.
                  format: int64
              example:
                charge_calculator_version: 5
                currency: eur
                deposit_charge: 78
                deposit_price: 1234
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PSingleUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: create_pricing_body
  /p2p/single_use_listings/{listingId}/set_description:
    post:
      tags:
      - F2F Single-use Listings
      summary: Set the description for this listing
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_ls:offline_update` scope to the client that is performing the request.
      operationId: setP2PSingleUseListingDescription
      parameters:
      - name: listingId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Soccer ticket
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/P2PSingleUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: description_body
  /p2p/transactions/{transaction_id}:
    get:
      tags:
      - F2F Transactions
      summary: Get a face-to-face transaction by its ID
      operationId: p2p.getTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
    patch:
      tags:
      - F2F Payment
      summary: "Update the description, currency, price and/or charge of this face-to-face\
        \ transaction"
      operationId: updateF2fTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                currency:
                  $ref: '#/components/schemas/Currency'
                deposit_charge:
                  type: integer
                  format: int64
                deposit_price:
                  type: integer
                  format: int64
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
              example:
                currency: eur
                deposit_charge: 78
                deposit_price: 1234
                description: Soccer ticket
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
              * `second_party_already_joined`
              * `values_not_changed`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: Forbidden
          content: {}
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: edit_f2f_transaction_body
  /p2p/transactions/{transaction_id}/accept_complaint:
    post:
      tags:
      - F2F Complaint
      summary: Accept a complaint for this face-to-face transaction
      operationId: p2p.acceptComplaint
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `funds_already_released`
              * `deposit_not_paid`
              * `deposit_already_refunded`
              * `not_complained`
          content: {}
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/accept_deposit:
    post:
      tags:
      - F2F Payment
      summary: Accept the deposit for this face-to-face transaction
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_tx:offline_accept_deposit` scope to the client that is performing
        the request.
      operationId: p2p.acceptDeposit
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `deposit_not_paid`
              * `deposit_payment_in_review`
              * `deposit_already_accepted`
              * `already_cancelled`
              * `deposit_already_captured`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /p2p/transactions/{transaction_id}/accept_deposit_with_guest_seller:
    post:
      tags:
      - F2F Payment
      summary: Accept the deposit for this face-to-face transaction as a guest seller
      operationId: p2p.acceptDepositWithGuestSeller
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_seller`
              * `subject_is_not_guest_user`
              * `deposit_not_paid`
              * `deposit_already_accepted`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/bank_transfer_details:
    get:
      tags:
      - F2F Payment
      summary: |
        Get the bank transfer details for a face-to-face transaction which payment method is `bank_transfer`
      operationId: p2p.getBankTransferDetails
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.BankTransferDetails'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `payment_method_not_bank_transfer`
          content: {}
  /p2p/transactions/{transaction_id}/billing_details:
    get:
      tags:
      - F2F Buyer/Seller Details
      summary: Get billing details from this p2p transaction
      operationId: p2p.getBillingDetails
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.BillingDetails'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/cancel_with_description:
    post:
      tags:
      - F2F Cancel
      summary: Cancel this face-to-face transaction with a description
      description: |
        If a transaction is cancelled after the deposit has been paid
        then the deposit (excluding the Trustap fee) will be returned to
        the buyer.
        Offline access is allowed for this endpoint when the user has
        granted the `p2p_tx:offline_cancel` scope to the client
        that is performing the request.
      operationId: p2p.cancelWithDescription
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: Trustap-User
        in: header
        description: "Required in client flows, where you make API calls on behalf\
          \ of another Trustap user."
        required: false
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Found another buyer
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `second_party_not_joined`
              * `already_cancelled`
              * `remainder_already_paid`
              * `handover_already_confirmed`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      security:
      - APIKey: []
      x-codegen-request-body-name: cancel_with_description_body
  /p2p/transactions/{transaction_id}/cancel_with_description_with_guest_user:
    post:
      tags:
      - F2F Cancel
      summary: Cancel this face-to-face transaction with a description with guest
        user
      description: |
        If a transaction is cancelled after the deposit has been paid
        then the deposit (excluding the Trustap fee) will be returned to
        the buyer.
      operationId: p2p.cancelP2PTransactionWithDescriptionAsGuest
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: Trustap-User
        in: header
        description: "Required in client flows, where you make API calls on behalf\
          \ of another Trustap user."
        required: false
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  minLength: 1
                  type: string
              example:
                description: Found another buyer
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `missing_description`
              * `empty_description`
              * `already_cancelled`
              * `remainder_already_paid`
              * `handover_already_confirmed`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      security:
      - APIKey: []
      x-codegen-request-body-name: cancel_with_description_body
  /p2p/transactions/{transaction_id}/claim_for_buyer:
    post:
      tags:
      - F2F Transactions
      summary: Claim a F2F transaction on behalf of the buyer
      description: |
        This endpoint enables a client to claim a face-to-face transaction on behalf of a buyer.
        This endpoint is only accessible for a client.
      operationId: p2p.claimForBuyer
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `already_claimed`
              * `cannot_claim_own_transaction`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /p2p/transactions/{transaction_id}/claim_for_seller:
    post:
      tags:
      - F2F Transactions
      summary: Claim a F2F transaction on behalf of the seller
      description: |
        This endpoint enables a client to claim a face-to-face transaction on behalf of a seller.
        This endpoint is only accessible for a client.
      operationId: p2p.claimTransactionForSeller
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `already_claimed`
              * `cannot_claim_own_transaction`
              * `invalid_user_platform`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/complain:
    post:
      tags:
      - F2F Complaint
      summary: Submit a complaint for this face-to-face transaction
      description: Offline access is allowed for this endpoint when the user has granted
        the `p2p_tx:offline_complain` scope to the client that is performing the request.
      operationId: p2p.submitComplaint
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Item was fake
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `remainder_required`
              * `already_complained`
              * `funds_already_released`
              * `complaint_period_expired`
          content: {}
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: submit_complaint_body
  /p2p/transactions/{transaction_id}/complain_with_guest_buyer:
    post:
      tags:
      - F2F Complaint
      summary: Submit a complaint for this face-to-face transaction with a guest buyer
      operationId: p2p.submitComplaintWithGuestBuyer
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Item was fake
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `remainder_required`
              * `already_complained`
              * `funds_already_released`
              * `complaint_period_expired`
          content: {}
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: submit_complaint_with_guest_buyer_body
  /p2p/transactions/{transaction_id}/confirm_handover:
    post:
      tags:
      - F2F Handover
      summary: Confirm the handover for this face-to-face transaction
      description: |
        Both parties should confirm the handover for a face-to-face
        transaction. The complaints period begins when the seller
        confirms the handover.
        Offline access is allowed for this endpoint when the user has
        granted the `p2p_tx:offline_confirm_handover` scope to the client
        that is performing the request.
      operationId: p2p.confirmHandover
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `remainder_required`
              * `already_complained`
              * `seller_handover_already_confirmed`
              * `buyer_handover_already_confirmed`
              * `remainder_payment_in_review`
              * `already_cancelled`
          content: {}
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/confirm_handover_with_guest_user:
    post:
      tags:
      - F2F Handover
      summary: Confirm the handover for this face-to-face transaction with a guest
        user
      description: |
        Both parties should confirm the handover for a face-to-face
        transaction. Full users don't have access to this endpoint.
      operationId: p2p.confirmHandoverWithGuestUserForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `remainder_required`
              * `already_complained`
              * `seller_handover_already_confirmed`
              * `buyer_handover_already_confirmed`
          content: {}
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/deposit_stripe_client_secret:
    get:
      tags:
      - F2F Payment
      summary: |
        Get the Stripe client secret for this face-to-face transaction
      description: |
        This endpoint is used for the asynchronous payment flow using
        Stripe. The `client_secret` returned from this endpoint should
        be passed to
        [stripe.confirmCardPayment](https://stripe.com/docs/stripe-js/reference#stripe-confirm-card-payment)
        to start the payment process.
      operationId: p2p.getDepositStripeClientSecretForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - client_secret
                type: object
                properties:
                  client_secret:
                    type: string
                example:
                  client_secret: '***'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `deposit_already_paid`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/end_complaint_period_with_guest_buyer:
    post:
      tags:
      - F2F Complaint
      summary: End the complaint period for this face-to-face transaction with a guest
        buyer
      operationId: p2p.endComplaintPeriodWithGuestBuyer
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `complaint_period_expired`
              * `already_complained`
              * `handover_not_confirmed`
              * `funds_already_released`
          content: {}
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/join_with_guest:
    post:
      tags:
      - F2F Transactions
      summary: Join the face-to-face transaction as guest user
      operationId: p2p.joinWithGuest
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `cannot_join_own_transaction`
              * `already_cancelled``
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/metadata:
    get:
      tags:
      - F2F Transactions
      summary: Get metadata for a face-to-face transaction
      operationId: p2p.getTransactionMetadata
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
        "404":
          description: Not Found
          content: {}
    post:
      tags:
      - F2F Transactions
      summary: Set metadata for a face-to-face transaction
      operationId: p2p.setTransactionMetadata
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
        required: false
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                additionalProperties: true
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `too_many_metadata_fields`
              * `value_too_long`
              * `field_name_too_long`
              * `empty_json`
              * `json_type_not_allowed``
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: set_transaction_metadata_body
  /p2p/transactions/{transaction_id}/remainder_stripe_client_secret:
    get:
      tags:
      - F2F Buyer/Seller Details
      summary: |
        Get the Stripe client secret for this face-to-face transaction
      description: |
        This endpoint is used for the asynchronous payment flow using
        Stripe. The `client_secret` returned from this endpoint should
        be passed to
        [stripe.confirmCardPayment](https://stripe.com/docs/stripe-js/reference#stripe-confirm-card-payment)
        to start the payment process.
      operationId: p2p.getRemainderStripeClientSecretForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - client_secret
                type: object
                properties:
                  client_secret:
                    type: string
                example:
                  client_secret: '***'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `missing_pricing`: Pricing details have not yet been
                added to this transaction.
              * `no_client_secret`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transaction_id}/set_deposit_payment_method:
    post:
      tags:
      - F2F Payment
      summary: Set deposit payment method for this face-to-face transaction
      description: |
        Set deposit payment method for face-to-face transaction. Values can be `card`,
        `bank_transfer`, `p24`, and `fpx`.
      operationId: p2p.setDepositPaymentMethod
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/p2p.DepositPaymentMethod'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_payment_method`
              * `deposit_already_paid`
              * `payment_method_already_set`: The specified payment method and charge configuration are already set.
              * `invalid_charge_config`: Charge configuration must be an integer greater than or equal to 1.
              * `unsupported_currency`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
              * `currency_missing`
              * `incorrect_charge`: Specified charge doesn't match expected charge.
              * `incorrect_charge_seller`: Specified seller charge doesn't match expected seller charge.
              * `incorrect_price`: Specified price doesn't match expected price.
              * `incorrect_currency`: Specified currency doesn't match expected currency.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: set_deposit_payment_method_body
  /p2p/transactions/{transaction_id}/stripe_publishable_key:
    get:
      tags:
      - F2F Buyer/Seller Details
      summary: |
        Get the details for the Stripe publishable key that is in use for this face-to-face transaction
      description: |
        Returns the Publishable Key for the Stripe Platform
        which is hosting this transaction.
      operationId: p2p.getStripePublishableKeyForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - publishable_key
                type: object
                properties:
                  publishable_key:
                    type: string
                example:
                  publishable_key: pk_xXxXxXxXxXx
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transactionId}/buyer_details:
    get:
      tags:
      - F2F Buyer/Seller Details
      summary: Get the details of the buyer from this face-to-face transaction
      operationId: getBuyerDetailsFromP2PTransaction
      parameters:
      - name: transactionId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetails'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transactionId}/seller_details:
    get:
      tags:
      - F2F Buyer/Seller Details
      summary: Get the details of the seller from this face-to-face transaction
      operationId: getSellerDetailsFromP2PTransaction
      parameters:
      - name: transactionId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetails'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions/{transactionId}/set_price:
    post:
      tags:
      - F2F Payment
      summary: Set the total price for this face-to-face transaction
      description: |
        `price` is the total price of the item, and thus includes the
        price already paid for the deposit.

        Note that this endpoint will return a `remainder_too_low`
        response if the difference between the total price and the
        deposit price is too low.
        Offline access is allowed for this endpoint when the user has
        granted the `p2p_tx:offline_set_price` scope to the client
        that is performing the request.
      operationId: setPriceForP2PTransaction
      parameters:
      - name: transactionId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge
              - charge_calculator_version
              - currency
              - price
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/p2p/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/p2p/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
              example:
                charge: 190
                charge_calculator_version: 2
                currency: eur
                price: 5000
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `currency_mismatch`: Pricing currency is different
                to the transaction's currency.
              * `remainder_already_skipped`
              * `remainder_too_low`: The difference between the
                total price of this transaction isn't larger than
                the deposit price.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: create_pricing_body
  /p2p/transactions/{transactionId}/skip_remainder:
    post:
      tags:
      - F2F Payment
      summary: Skip the remainder for this face-to-face transaction
      description: |
        This will skip the remainder payment of this transaction, and
        the total price of the transaction will not need to be set. Note
        that this must be done before the total price of the transaction
        is set using `/set_price`.
      operationId: skipRemainderForP2PTransaction
      parameters:
      - name: transactionId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `price_already_set`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions_by_claim_secret/{secret}/claim_as_buyer:
    post:
      tags:
      - F2F Transactions
      summary: Claim F2F transaction as buyer given a claim secret
      description: |
        This endpoint allows a full user to claim a transaction
        as buyer given a claim secret.
      operationId: p2p.claimAsBuyer
      parameters:
      - name: secret
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `already_claimed`
              * `cannot_claim_own_transaction`
              * `missing_secret`
              * `invalid_user_platform`
          content: {}
        "404":
          description: Not Found
          content: {}
  /p2p/transactions_by_claim_secret/{secret}/claim_as_seller:
    post:
      tags:
      - F2F Transactions
      summary: Claim a F2F transaction as the seller
      description: |
        This endpoint allows a full user to claim a transaction
        as seller given a claim secret.
      operationId: p2p.claimTransactionAsSeller
      parameters:
      - name: secret
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `missing_secret`
              * `already_claimed`
              * `cannot_claim_own_transaction`
              * `invalid_user_platform`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions_by_join_code/{join_code}/join:
    post:
      tags:
      - F2F Transactions
      summary: Join a face-to-face transaction by its join code
      description: This endpoint allows a user to join a transaction provided a join
        code. Offline access is allowed for this endpoint when the user has granted
        the `p2p_tx:offline_create_join` scope to the client that is performing the
        request.
      operationId: p2p.joinTransactionByJoinCode
      parameters:
      - name: join_code
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `cannot_join_own_transaction`
              * `already_cancelled`
              * `unsupported_currency`
              * `invalid_payment_method`
              * `invalid_user_id`
              * `incompatible_users`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions_by_join_code/{join_code}/reject:
    post:
      tags:
      - F2F Transactions
      summary: Reject a face-to-face transaction by its join code
      operationId: p2p.rejectTransactionByJoinCode
      parameters:
      - name: join_code
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `cannot_reject_own_transaction`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /p2p/transactions_by_join_code/{joinCode}:
    get:
      tags:
      - F2F Transactions
      summary: Get a face-to-face transaction by its join code
      operationId: getP2PTransactionByJoinCode
      parameters:
      - name: joinCode
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/p2p.Transaction'
        "404":
          description: Not Found
          content: {}
  /shippo_shipping_rates:
    post:
      tags:
      - Online Shipping
      summary: Get the list of Shippo shipping rates available
      description: |
        This returns the list of Shippo shipping rates available
        for the addreses provided i.e sender's address and recipient's
        address.
      operationId: basic.getShippoShippingRates
      requestBody:
        content:
          application/json:
            schema:
              required:
              - currency
              - parcel_distance_unit
              - parcel_height
              - parcel_length
              - parcel_mass_unit
              - parcel_weight
              - parcel_width
              - recipient_city
              - recipient_country
              - recipient_full_name
              - recipient_phone
              - recipient_state
              - recipient_street_1
              - recipient_zip_code
              - sender_city
              - sender_country
              - sender_full_name
              - sender_phone
              - sender_state
              - sender_street_1
              - sender_zip_code
              type: object
              properties:
                currency:
                  type: string
                customs_certify:
                  type: boolean
                customs_certify_signer:
                  type: string
                customs_description:
                  type: string
                customs_eel_pfc:
                  type: string
                customs_incoterm:
                  type: string
                customs_mass_unit:
                  type: string
                customs_net_weight:
                  type: number
                  format: double
                customs_non_delivery_option:
                  type: string
                  enum:
                  - return
                  - abandon
                customs_origin_country:
                  type: string
                customs_quantity:
                  type: integer
                  format: int64
                customs_value_amount:
                  type: string
                customs_value_currency:
                  type: string
                parcel_distance_unit:
                  $ref: '#/components/schemas/basic.DistanceUnit'
                parcel_height:
                  type: number
                  format: double
                parcel_length:
                  type: number
                  format: double
                parcel_mass_unit:
                  $ref: '#/components/schemas/basic.MassUnit'
                parcel_weight:
                  type: number
                  format: double
                parcel_width:
                  type: number
                  format: double
                recipient_city:
                  type: string
                recipient_country:
                  type: string
                recipient_full_name:
                  type: string
                recipient_phone:
                  type: string
                recipient_state:
                  type: string
                recipient_street_1:
                  type: string
                recipient_street_2:
                  type: string
                recipient_zip_code:
                  type: string
                sender_city:
                  type: string
                sender_country:
                  type: string
                sender_full_name:
                  type: string
                sender_phone:
                  type: string
                sender_state:
                  type: string
                sender_street_1:
                  type: string
                sender_street_2:
                  type: string
                sender_zip_code:
                  type: string
              example:
                currency: EUR
                customs_certify: true
                customs_certify_signer: Joe Doe
                customs_description: T-Shirt
                customs_incoterm: DDU
                customs_mass_unit: lb
                customs_net_weight: 5
                customs_non_delivery_option: return
                customs_origin_country: US
                customs_quantity: 20
                customs_value_amount: "200"
                customs_value_currency: USD
                parcel_distance_unit: cm
                parcel_height: 10
                parcel_length: 10
                parcel_mass_unit: lb
                parcel_weight: 10
                parcel_width: 10
                recipient_city: New York
                recipient_country: us
                recipient_full_name: Ivan Horvat
                recipient_phone: "123456789"
                recipient_state: New York
                recipient_street_1: 21-27 Marshall Court
                recipient_zip_code: "90218"
                sender_city: Altona
                sender_country: au
                sender_full_name: Ana Potter
                sender_phone: "123456789"
                sender_state: Victoria
                sender_street_1: 21-27 Marshall Court
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.ShippoShippingRatesResponse'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:
              * `missing_shipment_details`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
      - OAuth2: []
      - APIKey: []
      x-codegen-request-body-name: get_shippo_shipping_rates
  /single_use_listings/{listing_id}:
    get:
      tags:
      - Online Single-use Listings
      summary: Get a listing by its ID
      operationId: basic.getSingleUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.SingleUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
    delete:
      tags:
      - Online Single-use Listings
      summary: Delete this listing
      operationId: basic.deleteSingleUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: No Content
          content: {}
        "404":
          description: Not Found
          content: {}
      deprecated: true
    patch:
      tags:
      - Online Single-use Listings
      summary: Patch listing properties
      operationId: basic.updateSingleUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a request to
                    `/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                description:
                  type: string
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
              example:
                charge: 78
                charge_calculator_version: 5
                currency: eur
                description: Soccer ticket
                price: 1234
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.SingleUseListing'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `empty_body`: The request body is empty.
              * `partial_pricing`: When updating a pricing field, all 3 of
                `currency`, `price` and `charge` must be supplied.
          content: {}
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: patch_listing_body
  /single_use_listings/{listing_id}/create_transaction:
    post:
      tags:
      - Online Single-use Listings
      summary: Create a transaction from this listing
      operationId: basic.createTransactionFromSingleUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `listing_is_disabled`
              * `no_listing_currency`: The source listing doesn't
                have a currency.
              * `no_listing_price`: The source listing doesn't
                have pricing.
              * `no_listing_descr`: The source listing doesn't have
                a description.
              * `is_listing_creator`: The current user created this
                listing.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /single_use_listings/{listing_id}/create_transaction_with_guest_buyer:
    post:
      tags:
      - Online Single-use Listings
      summary: Create a transaction from this listing
      operationId: basic.createTransactionWithGuestBuyerFromSingleUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `listing_is_disabled`
              * `no_listing_currency`: The source listing doesn't
                have a currency.
              * `no_listing_price`: The source listing doesn't
                have pricing.
              * `no_listing_descr`: The source listing doesn't have
                a description.
              * `is_listing_creator`: The current user created this
                listing.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      deprecated: true
  /single_use_listings/{listing_id}/disable:
    post:
      tags:
      - Online Single-use Listings
      summary: Disable this listing
      description: |
        Calling `/create_transaction` on a disabled listing will return
        a `400` response.
      operationId: basic.disableSingleUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.SingleUseListing'
        "404":
          description: Not found
          content: {}
      deprecated: true
  /single_use_listings/{listing_id}/enable:
    post:
      tags:
      - Online Single-use Listings
      summary: Enable this listing
      operationId: basic.enableSingleUseListing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.SingleUseListing'
        "404":
          description: Not found
          content: {}
      deprecated: true
  /single_use_listings/{listing_id}/set_description:
    post:
      tags:
      - Online Single-use Listings
      summary: Set description for this listing
      operationId: basic.setSingleUseListingDescription
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Soccer ticket
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.SingleUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: description_body
  /single_use_listings/{listing_id}/set_pricing:
    post:
      tags:
      - Online Single-use Listings
      summary: Set pricing for this listing
      operationId: basic.setSingleUseListingPricing
      parameters:
      - name: listing_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge
              - charge_calculator_version
              - currency
              - price
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_calculator_version:
                  type: integer
                  description: The `charge_calculator_version` value returned from
                    a request to `/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a
                    request to `/charge`.
                  format: int64
                currency:
                  $ref: '#/components/schemas/Currency'
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
              example:
                charge: 78
                charge_calculator_version: 5
                currency: eur
                price: 1234
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.SingleUseListing'
        "404":
          description: Not Found
          content: {}
      deprecated: true
      x-codegen-request-body-name: create_pricing_body
  /supported_carriers:
    get:
      tags:
      - Online Shipping
      summary: Get the supported carriers
      description: |
        This returns the carriers that are currently supported for
        automated tracking in the online model. The carrier `name`
        should be shown to users but the `code` should be submitted to
        the `/track` endpoint when submitting tracking details.
        Likewise, when showing a transaction to the user, the `carrier`
        field stored with the transaction should be used to index these
        carriers and show the human-readable name of the carrier to the
        user, if this index is found.
      operationId: getSupportedCarriers
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                example:
                - code: an-post
                  name: An Post
                - code: fedex
                  name: FedEx
                - code: ups
                  name: UPS
                - code: usps
                  name: USPS
                items:
                  $ref: '#/components/schemas/Carrier'
      security:
      - OAuth2: []
      - APIKey: []
  /transactions:
    get:
      tags:
      - Online Transactions
      summary: Get an online transaction using a join code
      operationId: basic.getTransactionByJoinCode
      parameters:
      - name: join_code
        in: query
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `join_code_missing`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
    put:
      tags:
      - Online Transactions
      summary: Join an online transaction using a join code
      description: |
        A transaction can't be joined using its ID, because only the
        buyer and seller of a transaction can access a transaction using
        its ID.
      operationId: basic.joinTransaction
      parameters:
      - name: join_code
        in: query
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `join_code_missing`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions-by-join-code/{join_code}/reject:
    post:
      tags:
      - Online Transactions
      summary: Reject an online transaction by its join code
      description: |
        A transaction can't be rejected using its ID, because only the
        buyer and seller of a transaction can access a transaction using
        its ID.
      operationId: basic.rejectTransactionByJoinCode
      parameters:
      - name: join_code
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}:
    get:
      tags:
      - Online Transactions
      summary: Get an online transaction by its ID
      operationId: basic.getTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
    patch:
      tags:
      - Online Payment
      summary: "Update the description, currency, price and/or charge of an online\
        \ transaction"
      operationId: updateTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a
                    request to `/charge`.
                  format: int64
                currency:
                  type: string
                description:
                  type: string
                  description: |
                    A description of the goods being sold.
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
              example:
                charge: 78
                currency: eur
                description: Soccer ticket
                price: 1234
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
              * `second_party_already_joined`
              * `values_not_changed`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: Forbidden
          content: {}
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: edit_transaction_body
  /transactions/{transaction_id}/accept_complaint:
    post:
      tags:
      - Online Complaint
      summary: Accept complaint for this online transaction
      operationId: basic.acceptComplaint
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `funds_already_released`
              * `not_paid`
              * `not_complained`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/accept_listing_transaction:
    post:
      tags:
      - Online Transactions
      summary: |
        Allow this listing-based transaction to proceed
      description: |
        "Listing transactions" are transactions created from listings
        (using the `/create_transaction` endpoints for listings).
        Listings transactions for online transactions must be accepted
        by the creator of the listing using
        `/accept_listing_transaction` in order to proceed.
        Offline access is allowed for this endpoint when the user has
        granted the `basic_ls:offline_accept_listing` scope to the client
        that is performing the request.
      operationId: basic.acceptListingTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `no_listing`: This transaction wasn't created from a
                listing
              * `already_accepted`
              * `already_rejected`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_creator`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/accept_payment:
    post:
      tags:
      - Online Payment
      summary: Enable the seller to accept payment for an online transaction
      description: |
        This endpoint lets the seller accept payment and is accessible only if the seller
        has granted a feature `require_seller_acceptance`.
        Offline access is allowed for this endpoint when the user has
        granted the `basic_tx:offline_accept_payment` scope to the client
        that is performing the request.
      operationId: basic.acceptPayment
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `missing_required_feature`
              * `payment_already_accepted`
              * `transaction_not_paid_yet`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/accept_payment_with_guest_seller:
    post:
      tags:
      - Online Payment
      summary: Enable payment acceptance for the seller using `Trustap-User` for an
        online transaction
      description: |
        This endpoint allows payment acceptance for the seller specified in the
        header as `Trustap-User`.
      operationId: basic.acceptPaymentWithGuestSeller
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: Trustap-User
        in: header
        description: "Required in client flows, where you make API calls on behalf\
          \ of another Trustap user."
        required: false
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `missing_required_feature`
              * `payment_already_accepted`
              * `missing_shippo_shipping_rate_id`
              * `transaction_not_paid_yet`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/bank_transfer_details:
    get:
      tags:
      - Online Payment
      summary: |
        Get bank transfer details for an online transaction which payment method is `bank_transfer`
      operationId: basic.getBankTransferDetails
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.BankTransferDetails'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `payment_method_not_bank_transfer`
          content: {}
  /transactions/{transaction_id}/billing_details:
    get:
      tags:
      - Online Buyer/Seller Details
      summary: Get billing details from this online transaction
      operationId: basic.getBillingDetails
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.BillingDetails'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/buyer_details:
    get:
      tags:
      - Online Buyer/Seller Details
      summary: Get details of the buyer from this online transaction
      operationId: basic.getBuyerDetails
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetails'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/cancel:
    post:
      tags:
      - Online Cancel
      summary: Cancel this online transaction
      description: |
        Transaction can be cancelled until it's paid or if the feature
        `RequireSellerAcceptance` is present, it can be cancelled
        until it's tracked.
        Offline access is allowed for this endpoint when the user has
        granted the `basic_tx:offline_cancel` scope to the client
        that is performing the request.
      operationId: basic.cancelTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
              * `already_paid`
              * `already_cancelled`
              * `tracking_already_added`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: Forbidden
          content: {}
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/cancel_with_guest_user:
    post:
      tags:
      - Online Cancel
      summary: Cancel this online transaction with a guest user
      description: |
        This endpoint cancels a transaction for the user specified in the header
        as `Trustap-User`.
        Transaction can be cancelled until it's paid or if the feature
        `RequireSellerAcceptance` is present, it can be cancelled until it's tracked.
      operationId: basic.cancelTransactionWithGuestUser
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: Trustap-User
        in: header
        description: "Required in client flows, where you make API calls on behalf\
          \ of another Trustap user."
        required: false
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
              * `already_paid`
              * `already_cancelled`
              * `tracking_already_added`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: Forbidden
          content: {}
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/charge:
    get:
      tags:
      - Online Payment
      summary: Get the Trustap fee for an online transaction
      description: |
        This returns the Trustap fee, in the `currency`'s smallest unit,
        for a transaction involving goods with the supplied `price`. See
        [the Stripe
        documentation](https://stripe.com/docs/currencies#zero-decimal)
        for more details.
      operationId: basic.getChargeForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: price
        in: query
        description: |
          The price of the goods being sold in this transaction, in
          the `currency`'s smallest unit. For example, if a trading
          card is being sold for $12.34 (with `currency` as `usd`),
          then the request for the charge for this transaction would
          be `/charge?price=1234&currency=usd`.
        required: true
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: quantity
        in: query
        description: |
          When creating transactions from a multi-use listing, the
          `quantity` parameter can be provided in order to generate a
          charge for the given price multiplied by the given quantity.
          See `/multi_use_listings/{listingId}/create_transaction`
          for more details.
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      - name: payment_method
        in: query
        description: |
          The payment method that will be used to pay for the
          transaction. This is necessary because different payment
          methods may result in different fees.

          The default value is `card`.
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: charge_config
        in: query
        description: |
          The charge config for which the charge amount is computed.
        required: false
        style: form
        explode: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Charge'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_payment_method`
              * `unsupported_currency`
              * `currency_missing`
              * `invalid_price`
              * `negative_price`
              * `price_too_low`
              * `invalid_charge_config`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
      - OAuth2: []
      - APIKey: []
  /transactions/{transaction_id}/claim_for_buyer:
    post:
      tags:
      - Online Transactions
      summary: Claim online transaction on behalf of the buyer
      description: |
        This endpoint enables a client to claim an online transaction on behalf of a buyer.
        This endpoint is only accessible for a client.
      operationId: basic.claimTransactionForBuyer
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `already_claimed`
              * `cannot_claim_own_transaction`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/claim_for_seller:
    post:
      tags:
      - Online Transactions
      summary: Claim online transactions on behalf of the seller
      description: |
        This endpoint enables a client to claim an online transaction on behalf of a seller.
        This endpoint is only accessible for a client.
      operationId: basic.claimTransactionForSeller
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `already_claimed`
              * `cannot_claim_own_transaction`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/complain_with_description:
    post:
      tags:
      - Online Complaint
      summary: Submit a detailed complaint for this online transaction
      operationId: basic.submitComplaintWithDescription
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Item was fake
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `empty_complaint_description`
              * `already_complained`
              * `unconfirmed_delivery`: The complaint period for
                this transaction has not yet started.
              * `complaint_period_ended_prematurely`: The buyer has
                already ended the complaint period.
              * `complaint_period_expired`
              * `funds_already_released`
              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: description_body
  /transactions/{transaction_id}/complain_with_guest_buyer:
    post:
      tags:
      - Online Complaint
      summary: Submit a detailed complaint for this online transaction for the guest
        buyer using `Trustap-User`
      operationId: basic.submitComplaintWithGuestBuyer
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: Trustap-User
        in: header
        description: "Required in client flows, where you make API calls on behalf\
          \ of another Trustap user."
        required: false
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Item was fake
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `empty_complaint_description`
              * `already_complained`
              * `unconfirmed_delivery`: The complaint period for
                this transaction has not yet started.
              * `complaint_period_ended_prematurely`: The buyer has
                already ended the complaint period.
              * `complaint_period_expired`
              * `funds_already_released`
              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: description_body
  /transactions/{transaction_id}/confirm_delivery:
    post:
      tags:
      - Online Shipping
      summary: Confirm delivery for this online transaction
      description: |
        This endpoint allows the buyer to manually confirm the delivery of the
        item in the case that the state of the transaction was not updated
        asynchronously by Trustap.
      operationId: basic.confirmDelivery
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `tracking_not_added`
              * `delivery_already_set`
              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/confirm_delivery_with_guest_buyer:
    post:
      tags:
      - Online Shipping
      summary: Confirm delivery for this online transaction
      description: |
        This endpoint allows the client to manually confirm the delivery
        on behalf of the guest buyer specified in the header as `Trustap-User`.
      operationId: basic.confirmDeliveryWithGuestBuyer
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: Trustap-User
        in: header
        description: "Required in client flows, where you make API calls on behalf\
          \ of another Trustap user."
        required: false
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `tracking_not_added`
              * `delivery_already_set`
              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/delivery_point:
    post:
      tags:
      - Online Shipping
      summary: Set a delivery point for HR posta
      operationId: basic.setDeliveryPoint
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - carrier
              - city
              - delivery_center_code
              - delivery_type
              - email
              - full_name
              - house_number
              - phone
              - postal_code
              - street
              type: object
              properties:
                carrier:
                  type: string
                city:
                  type: string
                delivery_center_code:
                  type: string
                delivery_type:
                  type: string
                  enum:
                  - parcel_locker
                  - postal_office
                email:
                  type: string
                full_name:
                  type: string
                house_number:
                  type: string
                house_number_suffix:
                  type: string
                phone:
                  type: string
                postal_code:
                  type: string
                street:
                  type: string
              example:
                carrier: posta_hr
                city: Zagreb
                delivery_center_code: 321ha32
                delivery_type: parcel_locker
                email: ivan.horvat@email.com
                full_name: Ivan Horvat
                house_number: 147
                house_number_suffix: A
                phone: 9.97896541E8
                postal_code: 10000
                street: Ilica
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.DeliveryDetails'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `empty_join_code`
              * `empty_name`
              * `empty_phone`
              * `empty_email`
              * `empty_street`
              * `empty_house_number`
              * `empty_postal_code`
              * `empty_city`
              * `empty_delivery_center_code`
              * `empty_delivery_type`
              * `empty_carrier`
              * `unsupported_carrier`
              * `unsupported_delivery_type`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: delivery_point_body
  /transactions/{transaction_id}/end_complaint_period:
    post:
      tags:
      - Online Complaint
      summary: End the complaint period for this online transaction
      operationId: basic.endComplaintPeriod
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `complaint_period_expired`
              * `already_complained`
              * `complaint_period_ended_prematurely`
              * `invalid_id`
              * `unconfirmed_delivery`: The complaint period for
                this transaction has not yet started.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/extend_tracking_deadline:
    post:
      tags:
      - Online Shipping
      summary: Extend tracking details submission deadline for this online transaction
      description: |
        This endpoint allows the buyer to extend the tracking details
        submission deadline for the seller.
      operationId: basic.extendTrackingDeadlineForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
              * `tracking_already_added`
              * `payment_details_not_added`
              * `tracking_submission_window_not_started`
          content: {}
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/generate_shipment_label:
    post:
      tags:
      - Online Shipping
      summary: Generate a shipment label for this online transaction's parcel
      description: |
        This endpoint returns a PDF containing the label for the
        transaction's parcel. Both sender and recipient details
        have to be submitted before making a call to this endpoint.
      operationId: basic.generateShipmentLabel
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: carrier
        in: query
        required: true
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.ShipmentLabel'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `pick_up_details_missing`
              * `drop_off_details_missing`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/pick_up_point:
    post:
      tags:
      - Online Shipping
      summary: Set a pick up point for carrier (i.e HR posta)
      operationId: basic.setPickUpPoint
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - carrier
              - city
              - delivery_type
              - email
              - full_name
              - house_number
              - phone
              - pick_up_center_code
              - postal_code
              - street
              type: object
              properties:
                carrier:
                  type: string
                city:
                  type: string
                delivery_type:
                  type: string
                  enum:
                  - parcel_locker
                  - postal_office
                email:
                  type: string
                full_name:
                  type: string
                house_number:
                  type: string
                house_number_suffix:
                  type: string
                phone:
                  type: string
                pick_up_center_code:
                  type: string
                postal_code:
                  type: string
                street:
                  type: string
              example:
                carrier: posta_hr
                city: Zagreb
                delivery_type: parcel_locker
                email: ivan.horvat@email.com
                full_name: Ivan Horvat
                house_number: 147
                house_number_suffix: A
                phone: 9.97896541E8
                pick_up_center_code: 321ha32
                postal_code: 10000
                street: Ilica
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.PickUpDetails'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `empty_join_code`
              * `empty_full_name`
              * `empty_phone`
              * `empty_email`
              * `empty_street`
              * `empty_house_number`
              * `empty_postal_code`
              * `empty_city`
              * `empty_pick_up_center_code`
              * `empty_delivery_type`
              * `empty_carrier`
              * `unsupported_carrier`
              * `unsupported_delivery_type`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: pick_up_point_body
  /transactions/{transaction_id}/reject_listing_transaction:
    post:
      tags:
      - Online Cancel
      summary: |
        Cancel this listing-based transaction
      description: |
        "Listing transactions" are transactions created from listings
        (using the `/create_transaction` endpoints for listings).
        Listings transactions for online transactions must be accepted
        by the creator of the listing using
        `/accept_listing_transaction` in order to proceed. This endpoint
        instead rejects the listing transaction.
      operationId: basic.rejectListingTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `no_listing`: This transaction wasn't created from a
                listing
              * `already_accepted`
              * `already_rejected`
              * `second_party_not_joined`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_creator`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/seller_details:
    get:
      tags:
      - Online Buyer/Seller Details
      summary: Get details of the seller from this online transaction
      operationId: basic.getSellerDetails
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserDetails'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/set_payment_method:
    post:
      tags:
      - Online Payment
      summary: |
        Set the payment method to be used for this online transaction
      description: |
        Different payment methods incur different rates, so the payment
        method to be used for a transaction must be set before the
        payment is made. This requires retrieving the charge associated
        with the payment method using
        `GET /transactions/{transaction_id}/charge`, and passing the
        generated charge as a parameter to this endpoint.
      operationId: basic.setPaymentMethodForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - charge
              - currency
              - price
              type: object
              properties:
                charge:
                  type: integer
                  description: |
                    The `charge` value returned from a request to
                    `/charge`.
                  format: int64
                charge_config:
                  type: integer
                  description: |
                    The charge config for which the charge amount is computed.
                  format: int64
                charge_seller:
                  type: integer
                  description: |
                    The `charge_seller` value returned from a request to
                    `/charge`.
                  format: int64
                currency:
                  type: string
                payment_method:
                  type: string
                price:
                  type: integer
                  description: |
                    The price of the goods being sold, in the
                    `currency`'s smallest unit.  The `charge` value
                    should correspond to the Trustap charge created
                    with this price, otherwise this request will
                    fail with a `400` error.
                  format: int64
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_payment_method`
              * `unsupported_currency`
              * `currency_missing`
              * `incorrect_charge`
              * `incorrect_charge_seller`
              * `incorrect_price`
              * `incorrect_currency`
              * `invalid_charge_config`
              * `unsupported_combination`: The provided payment method, charge config and currency combination isn't supported.
              * `payment_method_already_set`: The specified payment method and charge configuration are already set.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: set_payment_method_for_transaction_body
  /transactions/{transaction_id}/shipping_details:
    get:
      tags:
      - Online Shipping
      summary: Get the shipping details of the buyer from this online transaction
      operationId: basic.getShippingDetailsFromTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShippingDetails'
        "404":
          description: Not Found
          content: {}
    post:
      tags:
      - Online Shipping
      summary: Post the shipping details of the buyer from this online transaction
      operationId: basic.setShippingDetails
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - country
              - name
              type: object
              properties:
                address_line_1:
                  type: string
                address_line_2:
                  type: string
                city:
                  type: string
                country:
                  minLength: 1
                  type: string
                name:
                  minLength: 1
                  type: string
                phone:
                  type: string
                postal_code:
                  type: string
                state:
                  type: string
              example:
                address_line_1: 3672 Massillon Rd
                address_line_2: 3672 Massillon Rd
                city: Green
                country: us
                name: John Doe
                phone: 330-896-9303
                postal_code: 44685
                state: Ohio
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShippingDetails'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `empty_name`
              * `empty_country`
          content: {}
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: ship_transaction_body
  /transactions/{transaction_id}/shippo_address:
    post:
      tags:
      - Online Shipping
      summary: Set the sender's or recipient's address for Shippo shipment
      operationId: basic.setShippoAddress
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - city
              - country
              - full_name
              - is_sender_address
              - phone
              - state
              - street_1
              - zip_code
              type: object
              properties:
                city:
                  type: string
                country:
                  type: string
                email:
                  type: string
                full_name:
                  type: string
                is_sender_address:
                  type: boolean
                phone:
                  type: string
                state:
                  type: string
                street_1:
                  type: string
                street_2:
                  type: string
                zip_code:
                  type: string
              example:
                city: Altona
                country: au
                full_name: Ivan Horvat
                phone: 4215559099
                postal_code: 10000
                state: Victoria
                street_1: 21-27 Marshall Court
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.ShippoAddress'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `missing_tx_feature`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: set_shippo_address_body
  /transactions/{transaction_id}/shippo_customs_declaration:
    post:
      tags:
      - Online Shipping
      summary: Send a customs declaration for this online transaction's shipment
      operationId: basic.setShippoCustomsDeclaration
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - certify
              - certify_signer
              - description
              - mass_unit
              - net_weight
              - non_delivery_option
              - origin_country
              - quantity
              - value_amount
              - value_currency
              type: object
              properties:
                certify:
                  type: boolean
                certify_signer:
                  type: string
                description:
                  type: string
                eel_pfc:
                  type: string
                incoterm:
                  type: string
                mass_unit:
                  type: string
                net_weight:
                  type: number
                  format: double
                non_delivery_option:
                  type: string
                  enum:
                  - return
                  - abandon
                origin_country:
                  type: string
                quantity:
                  type: integer
                  format: int64
                value_amount:
                  type: string
                value_currency:
                  type: string
              example:
                certify: true
                certify_signer: Joe Doe
                description: T-Shirt
                incoterm: DDU
                mass_unit: lb
                net_weight: 5
                non_delivery_option: return
                origin_country: US
                quantity: 20
                value_amount: 200
                value_currency: USD
        required: true
      responses:
        "204":
          description: No Content
          content: {}
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `missing_tx_feature`
              * `customs_declaration_already_submitted`
              * `nothing_to_declare`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: set_shippo_customs_declaration_body
  /transactions/{transaction_id}/shippo_parcel_details:
    post:
      tags:
      - Online Shipping
      summary: Set Shippo parcel details for this online transaction
      operationId: basic.setShippoParcelDetails
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - distance_unit
              - height
              - length
              - mass_unit
              - shipment_date
              - weight
              - width
              type: object
              properties:
                distance_unit:
                  $ref: '#/components/schemas/basic.DistanceUnit'
                height:
                  type: number
                  format: double
                length:
                  type: number
                  format: double
                mass_unit:
                  $ref: '#/components/schemas/basic.DistanceUnit'
                shipment_date:
                  type: string
                  description: |
                    Date the shipment will be tendered to the carrier.
                    Must be in the format 2014-01-18T00:35:03.463Z
                weight:
                  type: number
                  format: double
                width:
                  type: number
                  format: double
              example:
                distance_unit: cm
                height: 10
                lenght: 10
                mass_unit: lb
                weight: 10
                width: 10
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.ShippoParcel'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `missing_tx_feature`
              * `wrong_shipment_date_format`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: set_shippo_parcel_details_body
  /transactions/{transaction_id}/shippo_shipping_label:
    get:
      tags:
      - Online Shipping
      summary: Get Shippo generated label details for this online transaction
      operationId: basic.getShippoShippingLabel
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShippoLabelDetails'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `transaction_not_tracked`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /transactions/{transaction_id}/shippo_shipping_rate:
    post:
      tags:
      - Online Shipping
      summary: Set Shippo shipping rate for this online transaction
      description: |
        Set Shippo shipping rate for the transaction.
        This rate will be used to purchase the Shippo label once the
        transaction is paid. Shipment ID can be provided as an optional parameter,
        depending on the flow which is used to obtain it.
      operationId: basic.setShippoShippingRate
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - rate_id
              type: object
              properties:
                rate_id:
                  type: string
                shipment_id:
                  type: string
              example:
                rate_id: d755e91036a84c15bd5318f4b67c7707
        required: true
      responses:
        "204":
          description: No Content
          content: {}
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `missing_tx_feature`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: set_shippo_shipping_rate_body
  /transactions/{transaction_id}/shippo_shipping_rates:
    get:
      tags:
      - Online Shipping
      summary: Get Shippo shipping rates based on the sender's and recipient's address
        and parcel details
      operationId: basic.getShippoShippingRatesForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/basic.ShippoRate'
        "400":
          description: |
            Bad Request
            `code` can be one of the following:
              * `missing_tx_feature`
              * `missing_shipment_details`
              * `customs_declaration_required`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /transactions/{transaction_id}/stripe_client_secret:
    get:
      tags:
      - Online Buyer/Seller Details
      summary: |
        Get the Stripe client secret for this online transaction
      description: |
        This endpoint is used for the asynchronous payment flow using
        Stripe. The `client_secret` returned from this endpoint should
        be passed to
        [stripe.confirmCardPayment](https://stripe.com/docs/stripe-js/reference#stripe-confirm-card-payment)
        to start the payment process.
      operationId: getStripeClientSecretForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - client_secret
                type: object
                properties:
                  client_secret:
                    type: string
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `already_paid`
              * `invalid_id`
              * `not_accepted`: This transaction was created from a
                listing but the listing's creator has not yet
                accepted this transaction.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/stripe_publishable_key:
    get:
      tags:
      - Online Buyer/Seller Details
      summary: |
        Get the details for the Stripe publishable key that is in use for this online transaction
      description: |
        Returns the Publishable Key for the Stripe Platform
        which is hosting this transaction.
      operationId: basic.getStripePublishableKeyForTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                required:
                - publishable_key
                type: object
                properties:
                  publishable_key:
                    type: string
                example:
                  publishable_key: pk_xXxXxXxXxXx
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /transactions/{transaction_id}/submit_order_issue:
    post:
      tags:
      - Online Transactions
      summary: Submit a detailed order issue for this online transaction
      operationId: basic.submitOrderIssue
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - description
              type: object
              properties:
                description:
                  type: string
              example:
                description: Delivery is delayed
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `delivery_already_set`
              * `tracking_not_added`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_buyer`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: description_body
  /transactions/{transaction_id}/track:
    post:
      tags:
      - Online Shipping
      summary: Set postal tracking details for this online transaction
      description: |
        After the tracking information has been submitted then the state
        of the transaction will be updated asynchronously by Trustap
        once the delivery of the item has been confirmed, at which point
        the `delivered` field of the transaction will be set.
        Offline access is allowed for this endpoint when the user has
        granted the `basic_tx:offline_track` scope to the client
        that is performing the request.
      operationId: basic.trackTransaction
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              required:
              - carrier
              - tracking_code
              type: object
              properties:
                carrier:
                  minLength: 1
                  type: string
                tracking_code:
                  minLength: 1
                  type: string
              example:
                carrier: ups
                tracking_code: '***'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
              * `empty_carrier`
              * `empty_tracking_code`
              * `tracking_already_added`
              * `payment_details_not_added`
              * `tracking_details_deadline_expired`
              * `already_cancelled`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: track_transaction_body
  /transactions/{transaction_id}/track_with_guest_seller:
    post:
      tags:
      - Online Shipping
      summary: Set postal tracking details for this online transaction
      description: |
        Add tracking details for the guest seller specified
        in the header as `Trustap-User`.
      operationId: basic.trackTransactionWithGuestSeller
      parameters:
      - name: transaction_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      - name: Trustap-User
        in: header
        description: "Required in client flows, where you make API calls on behalf\
          \ of another Trustap user."
        required: false
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              required:
              - carrier
              - tracking_code
              type: object
              properties:
                carrier:
                  minLength: 1
                  type: string
                tracking_code:
                  minLength: 1
                  type: string
              example:
                carrier: ups
                tracking_code: '***'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `invalid_id`
              * `empty_carrier`
              * `empty_tracking_code`
              * `tracking_already_added`
              * `payment_details_not_added`
              * `tracking_details_deadline_expired`
              * `already_cancelled`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "403":
          description: |
            Forbidden

            `code` can be one of the following:

              * `not_seller`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
      x-codegen-request-body-name: track_transaction_body
  /transactions_by_claim_secret/{secret}/claim_as_buyer:
    post:
      tags:
      - Online Transactions
      summary: Claim for an online transaction as buyer given a claim secret
      description: |
        This endpoint allows a full user to claim for a transaction
        as buyer given a claim secret.
      operationId: basic.claimAsBuyer
      parameters:
      - name: secret
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `already_claimed`
              * `cannot_claim_own_transaction`
              * `missing_secret`
          content: {}
        "404":
          description: Not Found
          content: {}
  /transactions_by_claim_secret/{secret}/claim_as_seller:
    post:
      tags:
      - Online Transactions
      summary: Claim an Online transaction as the seller
      description: |
        This endpoint allows a full user to claim a transaction
        as seller given a claim secret.
      operationId: basic.claimTransactionAsSeller
      parameters:
      - name: secret
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/basic.Transaction'
        "400":
          description: |
            Bad Request

            `code` can be one of the following:

              * `missing_secret`
              * `already_claimed`
              * `cannot_claim_own_transaction`
              * `invalid_user_platform`
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        "404":
          description: Not Found
          content: {}
  /users/clients/{client_id}/users/{user_id}:
    get:
      tags:
      - Users
      summary: Get user details for the specific client
      operationId: users_client.getUserByClientID
      parameters:
      - name: client_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: user_id
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/users_client.User'
components:
  schemas:
    Carrier:
      required:
      - code
      - name
      type: object
      properties:
        code:
          type: string
        name:
          type: string
    CarrierName:
      type: string
      example: fedex
      enum:
      - fedex
      - ups
      - usps
      - posta_hr
    Complaint:
      required:
      - description
      type: object
      properties:
        description:
          type: string
      example:
        description: Item was fake
    Currency:
      type: string
      example: eur
      enum:
      - aud
      - eur
      - gbp
      - myr
      - pln
      - sek
      - usd
      - huf
    DocumentVerification:
      required:
      - previously_submitted
      - status
      type: object
      properties:
        previously_submitted:
          type: boolean
        status:
          type: string
          description: |
            Verification status of the document could be one of the following:
            `due`, `not_due`, `verifying`, `verified`
      example:
        previously_submitted: true
        status: verifying
    Error:
      required:
      - code
      - error
      type: object
      properties:
        code:
          type: string
        error:
          type: string
          description: |
            A contextual description of the error that occurred. When
            handling errors the `code` field should be used to determine
            the type of error that occurred, as the text in the `error`
            field may change unexpectedly.
      example:
        code: negative_price
        error: '`price` cannot be negative'
    ListingType:
      type: string
      example: single_use
      enum:
      - single_use
      - multi_use
    OrderIssue:
      required:
      - description
      type: object
      properties:
        description:
          type: string
      example:
        description: Delivery delayed
    P2PMultiUseListing:
      required:
      - id
      type: object
      properties:
        allows_multi_use:
          type: boolean
        created:
          type: string
        creator_id:
          type: string
        creator_role:
          type: string
        currency:
          type: string
        deposit_pricing:
          $ref: '#/components/schemas/basic.Pricing'
        description:
          type: string
        id:
          type: integer
          format: int64
        skip_remainder:
          type: boolean
      example:
        allows_multi_use: true
        created: 2019-12-25T09:00:00Z
        creator_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
        deposit_pricing:
          charge: 150
          price: 5000
        description: ""
        id: 77f36253-7a43-4d47-897d-f73dd208e17a
        skip_remainder: false
    P2PSingleUseListing:
      required:
      - id
      type: object
      properties:
        allows_multi_use:
          type: boolean
        created:
          type: string
        creator_id:
          type: string
        creator_role:
          type: string
        currency:
          type: string
        deposit_pricing:
          $ref: '#/components/schemas/basic.Pricing'
        description:
          type: string
        disabled:
          type: string
        id:
          type: integer
          format: int64
        skip_remainder:
          type: boolean
      example:
        allows_multi_use: false
        created: 2019-12-25T09:00:00Z
        creator_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
        deposit_pricing:
          charge: 150
          price: 5000
        description: ""
        id: 77f36253-7a43-4d47-897d-f73dd208e17a
        skip_remainder: false
    PostaHrTracking:
      required:
      - barcode
      - barcode_generated
      type: object
      properties:
        barcode:
          type: string
        barcode_generated:
          type: string
          format: date-time
      example:
        barcode: ABC123456
        barcode_generated: 2019-12-26T14:00:00Z
    ProfilePayoutStatus:
      required:
      - status
      type: object
      properties:
        status:
          type: string
          description: |
            Payout status will be one of the following:
            - `complete`: The user has completed their profile and payment information,
            and can accept payouts.
            - `verifying`: The user has submitted profile and payment information, which
            is currently being verified.
            - `due`: The user has not adequately filled out their payment information,
            or may need to update or ammend the provided information before they can
            accept payouts.
          enum:
          - complete
          - verifying
          - due
      example:
        status: verifying
    ShippingDetails:
      required:
      - address
      - name
      - phone
      type: object
      properties:
        address:
          $ref: '#/components/schemas/ShippingDetailsAddress'
        name:
          type: string
        phone:
          type: string
    ShippingDetailsAddress:
      required:
      - city
      - country
      - line1
      - line2
      - postal_code
      - state
      type: object
      properties:
        city:
          type: string
        country:
          type: string
        line1:
          type: string
        line2:
          type: string
        postal_code:
          type: string
        state:
          type: string
    ShippoLabelDetails:
      required:
      - label_url
      - tracking_code
      - tracking_url
      type: object
      properties:
        label_url:
          type: string
        qr_code_url:
          type: string
          format: uri
        tracking_code:
          type: string
        tracking_url:
          type: string
    Tracking:
      required:
      - carrier
      - tracking_code
      type: object
      properties:
        carrier:
          type: string
        tracking_code:
          type: string
      example:
        carrier: ups
        tracking_code: '***'
    UserDetails:
      required:
      - email
      type: object
      properties:
        email:
          type: string
        name:
          $ref: '#/components/schemas/basic.UserDetailsName'
        phone:
          type: string
    app_notifs.Notification:
      required:
      - created
      - description
      - id
      - target
      - user_id
      type: object
      properties:
        created:
          type: string
          format: date-time
        description:
          type: string
        id:
          type: integer
          format: int64
        read:
          type: string
          format: date-time
        target:
          type: string
        user_id:
          type: string
      example:
        created: 2019-12-25T10:00:00Z
        description: Buyer has joined transaction for 'Soccer ticket'
        id: 1990
        target: basic/1309
        user_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
    basic.Aba:
      required:
      - account_number
      - bank_name
      - routing_number
      type: object
      properties:
        account_number:
          type: string
        bank_name:
          type: string
        routing_number:
          type: string
    basic.BankTransferDetails:
      required:
      - amount
      - currency
      - financial_address
      - hosted_instructions_url
      - reference
      type: object
      properties:
        amount:
          type: integer
          format: int64
        currency:
          type: string
        financial_address:
          $ref: '#/components/schemas/basic.FinancialAddress'
        hosted_instructions_url:
          type: string
        reference:
          type: string
    basic.BillingDetails:
      required:
      - email
      type: object
      properties:
        email:
          type: string
        name:
          type: string
        phone:
          type: string
    basic.CarrierFacility:
      required:
      - address
      - city
      - delivery_type
      - name
      - postal_code
      type: object
      properties:
        address:
          type: string
        city:
          type: string
        code:
          type: string
        delivery_type:
          type: string
        name:
          type: string
        postal_code:
          type: string
    basic.Charge:
      required:
      - charge
      - charge_calculator_version
      - charge_seller
      - currency
      - price
      type: object
      properties:
        charge:
          type: integer
          description: |
            The Trustap fee that the buyer will pay, in the `currency`'s
            smallest unit, for a queried amount. See [the Stripe
            documentation](https://stripe.com/docs/currencies#zero-decimal)
            for more details.
          format: int64
        charge_calculator_version:
          type: integer
          description: |
            The version of the Trustap charge calculator that was used
            to calculate this charge.

            This property is present for error-handling purposes. The
            Trustap API allows apps and users to query how much Trustap
            will charge for a transaction before creating a transaction.
            Trustap then requires the queried charge to be provided when
            creating a transaction or listing. At this point the charge
            is calculated again and checked against the provided charge,
            to ensure that the charge calculated for the new resource is
            the same as the one shown to the user. In the unlikely event
            that the Trustap charge calculator used to calculate the
            charge has been updated, then the
            `charge_calculator_version` property will be used to return
            an `incorrect_calc_version` to the API client, which will
            indicate that the `/charge` endpoint should be queried again
            to get the newest charge value.
          format: int64
        charge_config:
          type: integer
          description: |
            The config for which the charge amount is computed.
          format: int64
          default: 1
        charge_postage_buyer:
          type: integer
          description: |
            When the transaction handles the generation of postage
            labels, then `charge_postage_buyer` will be added to cover this
            fee together with `charge_postage_client`
          format: int64
        charge_postage_client:
          type: integer
          format: int64
        charge_seller:
          type: integer
          description: |
            The Trustap fee that the seller will pay, in the
            `currency`'s smallest unit, for a queried amount. See [the
            Stripe
            documentation](https://stripe.com/docs/currencies#zero-decimal)
            for more details.
          format: int64
        currency:
          type: string
        payment_method:
          type: string
        price:
          type: integer
          format: int64
      example:
        charge: 340
        charge_calculator_version: 5
        charge_config: 1
        charge_postage_buyer: 1000
        charge_seller: 0
        currency: eur
        payment_method: card
        price: 10000
    basic.DeliveryDetails:
      required:
      - carrier
      - city
      - delivery_center_code
      - delivery_type
      - email
      - full_name
      - house_number
      - house_number_suffix
      - phone
      - postal_code
      - street
      type: object
      properties:
        carrier:
          type: string
        city:
          type: string
        delivery_center_code:
          type: string
        delivery_type:
          type: string
        email:
          type: string
        full_name:
          type: string
        house_number:
          type: string
        house_number_suffix:
          type: string
        phone:
          type: string
        postal_code:
          type: string
        street:
          type: string
    basic.DistanceUnit:
      type: string
      example: cm
      enum:
      - in
      - cm
    basic.Feature:
      type: string
      example: require_seller_acceptance
      enum:
      - require_seller_acceptance
      - use_hr_post
      - use_shippo
    basic.FinancialAddress:
      type: object
      properties:
        aba:
          $ref: '#/components/schemas/basic.Aba'
        iban:
          $ref: '#/components/schemas/basic.Iban'
        sort_code:
          $ref: '#/components/schemas/basic.SortCode'
        swift:
          $ref: '#/components/schemas/basic.Swift'
    basic.Iban:
      required:
      - account_holder_name
      - bic
      - country
      - iban
      type: object
      properties:
        account_holder_name:
          type: string
        bic:
          type: string
        country:
          type: string
        iban:
          type: string
    basic.MassUnit:
      type: string
      example: kg
      enum:
      - lb
      - kg
    basic.MultiUseListing:
      required:
      - created
      - creator_id
      - creator_role
      - id
      type: object
      properties:
        created:
          type: string
          format: date-time
        creator_id:
          type: string
        creator_role:
          $ref: '#/components/schemas/basic.Role'
        currency:
          type: string
        description:
          type: string
        disabled:
          type: string
          format: date-time
        id:
          type: string
        pricing:
          $ref: '#/components/schemas/basic.Pricing'
      example:
        created: 2019-12-25T09:00:00Z
        creator_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
        id: 77f36253-7a43-4d47-897d-f73dd208e17a
    basic.PickUpDetails:
      required:
      - carrier
      - city
      - delivery_type
      - email
      - full_name
      - house_number
      - house_number_suffix
      - phone
      - pick_up_center_code
      - postal_code
      - street
      type: object
      properties:
        carrier:
          type: string
        city:
          type: string
        delivery_type:
          type: string
        email:
          type: string
        full_name:
          type: string
        house_number:
          type: string
        house_number_suffix:
          type: string
        phone:
          type: string
        pick_up_center_code:
          type: string
        postal_code:
          type: string
        street:
          type: string
    basic.Pricing:
      required:
      - charge
      - charge_seller
      - price
      type: object
      properties:
        charge:
          type: integer
          format: int64
        charge_international_payment:
          type: integer
          format: int64
        charge_seller:
          type: integer
          format: int64
        price:
          type: integer
          format: int64
      example:
        charge: 78
        price: 1234
    basic.Refund:
      required:
      - amount
      - id
      - refunded
      type: object
      properties:
        amount:
          type: integer
          format: int64
        id:
          type: string
        refunded:
          type: string
          format: date-time
    basic.Review:
      type: object
      properties:
        approved:
          type: boolean
        finished:
          type: string
          format: date-time
        outcome_reason:
          type: string
        started:
          type: string
          format: date-time
    basic.Role:
      type: string
      example: buyer
      enum:
      - buyer
      - seller
    basic.ServiceLevel:
      required:
      - extended_token
      - name
      - terms
      - token
      type: object
      properties:
        extended_token:
          type: string
        name:
          type: string
        terms:
          type: string
        token:
          type: string
    basic.ShipmentLabel:
      required:
      - label
      type: object
      properties:
        label:
          type: string
    basic.ShippoAddress:
      required:
      - city
      - country
      - full_name
      - phone
      - state
      - street_1
      - zip_code
      type: object
      properties:
        city:
          type: string
        country:
          type: string
        email:
          type: string
        full_name:
          type: string
        phone:
          type: string
        state:
          type: string
        street_1:
          type: string
        street_2:
          type: string
        zip_code:
          type: string
    basic.ShippoParcel:
      required:
      - distance_unit
      - height
      - length
      - mass_unit
      - shipment_date
      - weight
      - width
      type: object
      properties:
        distance_unit:
          type: string
        height:
          type: number
          format: double
        length:
          type: number
          format: double
        mass_unit:
          type: string
        shipment_date:
          type: string
        weight:
          type: number
          format: double
        width:
          type: number
          format: double
    basic.ShippoRate:
      required:
      - amount
      - amount_local
      - attributes
      - currency
      - currency_local
      - duration_terms
      - estimated_days
      - id
      - provider
      - provider_image
      - servicelevel
      type: object
      properties:
        amount:
          type: string
        amount_local:
          type: string
        arrives_by:
          type: string
        attributes:
          type: array
          items:
            type: string
        currency:
          type: string
        currency_local:
          type: string
        duration_terms:
          type: string
        estimated_days:
          type: integer
          format: int64
        id:
          type: string
        provider:
          type: string
        provider_image:
          type: string
        servicelevel:
          $ref: '#/components/schemas/basic.ServiceLevel'
    basic.ShippoShippingRatesResponse:
      required:
      - rates
      - shipment_id
      type: object
      properties:
        rates:
          type: array
          items:
            $ref: '#/components/schemas/basic.ShippoRate'
        shipment_id:
          type: string
    basic.SingleUseListing:
      required:
      - created
      - creator_id
      - creator_role
      - id
      type: object
      properties:
        created:
          type: string
          format: date-time
        creator_id:
          type: string
        creator_role:
          $ref: '#/components/schemas/basic.Role'
        currency:
          type: string
        description:
          type: string
        disabled:
          type: string
          format: date-time
        id:
          type: string
        pricing:
          $ref: '#/components/schemas/basic.Pricing'
      example:
        created: 2019-12-25T09:00:00Z
        creator_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
        id: 77f36253-7a43-4d47-897d-f73dd208e17a
    basic.SortCode:
      required:
      - account_holder_name
      - account_number
      - sort_code
      type: object
      properties:
        account_holder_name:
          type: string
        account_number:
          type: string
        sort_code:
          type: string
    basic.Swift:
      required:
      - account_number
      - bank_name
      - swift_code
      type: object
      properties:
        account_number:
          type: string
        bank_name:
          type: string
        swift_code:
          type: string
    basic.Transaction:
      required:
      - charge
      - charge_seller
      - client_id
      - created
      - currency
      - description
      - id
      - is_payment_in_progress
      - price
      - quantity
      - status
      type: object
      properties:
        amount_refunded:
          type: integer
          format: int64
        amount_released:
          type: integer
          format: int64
        buyer_id:
          type: string
        cancelled:
          type: string
          format: date-time
        charge:
          type: integer
          format: int64
        charge_international_payment:
          type: integer
          format: int64
        charge_postage_buyer:
          type: integer
          format: int64
        charge_postage_client:
          type: integer
          format: int64
        charge_seller:
          type: integer
          format: int64
        claimed_by_buyer:
          type: string
          format: date-time
        client_id:
          type: string
        complained:
          type: string
          format: date-time
        complaint:
          $ref: '#/components/schemas/Complaint'
        complaint_period_deadline:
          type: string
          format: date-time
        complaint_period_ended:
          type: string
          format: date-time
        created:
          type: string
          format: date-time
        currency:
          type: string
          description: |
            The currency of the transaction. Note that, at present, the
            buyer must pay using the transaction's currency and the
            seller will be paid in the transaction's currency.
        delivered:
          type: string
          format: date-time
        denied:
          type: string
          format: date-time
        description:
          type: string
        funds_released:
          type: string
          format: date-time
        id:
          type: integer
          format: int64
        image_url:
          type: string
          description: |
            URL of the image displayed on the Trustap payment page to show the buyer
            the item they are paying for.
            Supports jpg, png, gif, bmp and svg files. Images displayed as a squares.
            Non-square images are cropped
          format: absolute_url
        is_payment_in_progress:
          type: boolean
          description: |
            If the transaction is paid via a delayed payment method,
            such as SEPA debit, this field will be `true` until the
            payment has fully succeeded or failed.
        join_code:
          type: string
        joined:
          type: string
          format: date-time
        listing_creator_accepted:
          type: string
          format: date-time
        listing_creator_rejected:
          type: string
          format: date-time
        listing_id:
          type: string
          description: |
            If the transaction is created from a listing then this is
            the ID of that listing; otherwise this property is omitted.
        listing_type:
          $ref: '#/components/schemas/ListingType'
        order_issue:
          $ref: '#/components/schemas/OrderIssue'
        order_issue_raised:
          type: string
          format: date-time
        paid:
          type: string
          format: date-time
        payment_accepted:
          type: string
          format: date-time
        payment_refunded:
          type: string
          format: date-time
        posta_hr_tracking:
          $ref: '#/components/schemas/PostaHrTracking'
        price:
          type: integer
          format: int64
        quantity:
          type: integer
          format: int64
        refunds:
          type: array
          items:
            $ref: '#/components/schemas/basic.Refund'
        released_to_seller:
          type: boolean
        review:
          $ref: '#/components/schemas/basic.Review'
        review_flagged:
          type: string
          format: date-time
        seller_id:
          type: string
        shippo_transaction_id:
          type: string
        status:
          type: string
        tracked:
          type: string
          format: date-time
        tracking:
          $ref: '#/components/schemas/Tracking'
        tracking_details_deadline:
          type: string
          format: date-time
        tracking_details_window_started:
          type: string
          format: date-time
      example:
        buyer_id: feb33a87-3917-4538-9260-127c8a6b5232
        charge: 78
        charge_seller: 0
        client_id: trustap-app
        created: 2019-12-25T09:00:00Z
        currency: eur
        delivered: 2019-12-25T13:00:00Z
        description: Soccer ticket
        funds_released: 2019-12-26T14:00:00Z
        id: 1309
        is_payment_in_progress: false
        joined: 2019-12-25T10:00:00Z
        paid: 2019-12-25T11:00:00Z
        posta_hr_tracking:
          barcode: ABC12345
          barcode_generated: 2019-12-25T12:00:00Z
        price: 1234
        quantity: 1
        seller_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
        status: funds_released
        tracked: 2019-12-25T12:00:00Z
        tracking:
          carrier: ups
          tracking_code: '***'
    basic.TransactionPage:
      required:
      - data
      - page
      - page_size
      - total_count
      - total_pages
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/basic.Transaction'
        page:
          type: integer
          format: int64
        page_size:
          type: integer
          format: int64
        total_count:
          type: integer
          format: int64
        total_pages:
          type: integer
          format: int64
    basic.UserDetailsName:
      required:
      - first
      - last
      type: object
      properties:
        first:
          type: string
        last:
          type: string
      example:
        first: John
        last: Doe
    p2p.Aba:
      required:
      - account_number
      - bank_name
      - routing_number
      type: object
      properties:
        account_number:
          type: string
        bank_name:
          type: string
        routing_number:
          type: string
    p2p.ActionsUrl:
      required:
      - actions_url
      type: object
      properties:
        actions_url:
          type: string
    p2p.BankTransferDetails:
      required:
      - amount
      - currency
      - financial_address
      - hosted_instructions_url
      - reference
      type: object
      properties:
        amount:
          type: integer
          format: int64
        currency:
          type: string
        financial_address:
          $ref: '#/components/schemas/p2p.FinancialAddress'
        hosted_instructions_url:
          type: string
        reference:
          type: string
    p2p.Cancellation:
      required:
      - reason
      type: object
      properties:
        reason:
          type: string
    p2p.Charge:
      required:
      - charge
      - charge_calculator_version
      - charge_seller
      - currency
      - price
      type: object
      properties:
        charge:
          type: integer
          description: |
            The Trustap fee that the buyer will pay, in the `currency`'s
            smallest unit, for a queried amount. See [the Stripe
            documentation](https://stripe.com/docs/currencies#zero-decimal)
            for more details.
          format: int64
        charge_calculator_version:
          type: integer
          description: |
            The version of the Trustap charge calculator that was used
            to calculate this charge.

            This property is present for error-handling purposes. The
            Trustap API allows apps and users to query how much Trustap
            will charge for a transaction before creating a transaction.
            Trustap then requires the queried charge to be provided when
            creating a transaction or listing. At this point the charge
            is calculated again and checked against the provided charge,
            to ensure that the charge calculated for the new resource is
            the same as the one shown to the user. In the unlikely event
            that the Trustap charge calculator used to calculate the
            charge has been updated, then the
            `charge_calculator_version` property will be used to return
            an `incorrect_calc_version` to the API client, which will
            indicate that the `/charge` endpoint should be queried again
            to get the newest charge value.
          format: int64
        charge_config:
          type: integer
          format: int64
          default: 1
        charge_seller:
          type: integer
          description: |
            The Trustap fee that the seller will pay, in the
            `currency`'s smallest unit, for a queried amount. See [the
            Stripe
            documentation](https://stripe.com/docs/currencies#zero-decimal)
            for more details.
          format: int64
        currency:
          type: string
        payment_method:
          type: string
        price:
          type: integer
          format: int64
      example:
        charge: 78
        charge_calculator_version: 5
        charge_config: 1
        charge_seller: 0
        currency: eur
        payment_method: card
        price: 1234
    p2p.Complaint:
      required:
      - description
      type: object
      properties:
        description:
          type: string
      example:
        description: Item was fake
    p2p.Currency:
      type: string
      example: eur
      enum:
      - aud
      - eur
      - gbp
      - myr
      - pln
      - sek
      - usd
      - huf
    p2p.DepositFeeMultiplier:
      required:
      - fee_multiplier
      type: object
      properties:
        fee_multiplier:
          type: number
          format: double
    p2p.DepositPaymentMethod:
      required:
      - currency
      - deposit_charge
      - deposit_charge_seller
      - deposit_price
      - payment_method
      type: object
      properties:
        charge_config:
          type: integer
          format: int64
        currency:
          type: string
        deposit_charge:
          type: integer
          format: int64
        deposit_charge_seller:
          type: integer
          format: int64
        deposit_price:
          type: integer
          format: int64
        payment_method:
          type: string
      example:
        currency: eur
        deposit_charge: 2000
        deposit_charge_seller: 0
        deposit_price: 200000
        payment_method: bank_transfer
    p2p.FinancialAddress:
      type: object
      properties:
        aba:
          $ref: '#/components/schemas/p2p.Aba'
        iban:
          $ref: '#/components/schemas/p2p.Iban'
        sort_code:
          $ref: '#/components/schemas/p2p.SortCode'
        swift:
          $ref: '#/components/schemas/p2p.Swift'
    p2p.Iban:
      required:
      - account_holder_name
      - bic
      - country
      - iban
      type: object
      properties:
        account_holder_name:
          type: string
        bic:
          type: string
        country:
          type: string
        iban:
          type: string
    p2p.ListingType:
      type: string
      example: single_use
      enum:
      - single_use
      - multi_use
    p2p.Pricing:
      required:
      - charge
      - charge_seller
      - price
      type: object
      properties:
        charge:
          type: integer
          format: int64
        charge_international_payment:
          type: integer
          format: int64
        charge_seller:
          type: integer
          format: int64
        deposit_fee_multiplier:
          $ref: '#/components/schemas/p2p.DepositFeeMultiplier'
        price:
          type: integer
          format: int64
      example:
        charge: 78
        price: 1234
    p2p.Refund:
      required:
      - amount
      - id
      - refunded
      type: object
      properties:
        amount:
          type: integer
          format: int64
        id:
          type: string
        refunded:
          type: string
          format: date-time
    p2p.Review:
      type: object
      properties:
        approved:
          type: boolean
        finished:
          type: string
          format: date-time
        outcome_reason:
          type: string
        started:
          type: string
          format: date-time
    p2p.Role:
      type: string
      example: buyer
      enum:
      - buyer
      - seller
    p2p.SortCode:
      required:
      - account_holder_name
      - account_number
      - sort_code
      type: object
      properties:
        account_holder_name:
          type: string
        account_number:
          type: string
        sort_code:
          type: string
    p2p.StripeToken:
      required:
      - stripe_token
      type: object
      properties:
        stripe_token:
          type: string
    p2p.Swift:
      required:
      - account_number
      - bank_name
      - swift_code
      type: object
      properties:
        account_number:
          type: string
        bank_name:
          type: string
        swift_code:
          type: string
    p2p.Transaction:
      required:
      - client_id
      - created
      - currency
      - deposit_pricing
      - description
      - id
      - is_deposit_payment_in_progress
      - is_remainder_payment_in_progress
      - quantity
      - skip_remainder
      - status
      type: object
      properties:
        amount_refunded:
          type: integer
          format: int64
        buyer_handover_confirmed:
          type: string
          format: date-time
        buyer_id:
          type: string
        buyer_is_guest:
          type: boolean
        cancellation:
          $ref: '#/components/schemas/p2p.Cancellation'
        cancelled:
          type: string
          format: date-time
        claimed_by_buyer:
          type: string
          format: date-time
        claimed_by_seller:
          type: string
          format: date-time
        client_id:
          type: string
        complained:
          type: string
          format: date-time
        complaint:
          $ref: '#/components/schemas/p2p.Complaint'
        complaint_period_deadline:
          type: string
          format: date-time
        complaint_period_ended:
          type: string
          format: date-time
        created:
          type: string
          format: date-time
        currency:
          type: string
          description: |
            The currency of the transaction. Note that, at present, the
            buyer must pay using the transaction's currency and the
            seller will be paid in the transaction's currency.
        deposit_accepted:
          type: string
          format: date-time
        deposit_paid:
          type: string
          format: date-time
        deposit_pricing:
          $ref: '#/components/schemas/p2p.Pricing'
        deposit_refunded:
          type: string
          format: date-time
        deposit_review:
          $ref: '#/components/schemas/p2p.Review'
        deposit_review_flagged:
          type: string
          format: date-time
        description:
          type: string
        funds_released:
          type: string
          format: date-time
        id:
          type: integer
          format: int64
        image_url:
          type: string
          description: |
            URL of the image displayed on the Trustap payment page to show the buyer
            the item they are paying for.
            Supports jpg, png, gif, bmp and svg files. Images displayed as a squares.
            Non-square images are cropped
          format: absolute_url
        is_deposit_payment_in_progress:
          type: boolean
          description: |
            If the deposit is paid via a delayed payment method,
            such as SEPA debit, this field will be `true` until the
            payment has fully succeeded or failed.
        is_remainder_payment_in_progress:
          type: boolean
          description: |
            If the remainder is paid via a delayed payment method,
            such as SEPA debit, this field will be `true` until the
            payment has fully succeeded or failed.
        join_code:
          type: string
        joined:
          type: string
          format: date-time
        listing_id:
          type: string
          description: |
            If the transaction is created from a listing then this is
            the ID of that listing; otherwise this property is omitted.
        listing_type:
          $ref: '#/components/schemas/p2p.ListingType'
        order_issue_raised:
          type: string
          format: date-time
        priced:
          type: string
          format: date-time
        pricing:
          $ref: '#/components/schemas/p2p.Pricing'
        quantity:
          type: integer
          format: int64
        refunded:
          type: string
          format: date-time
        refunds:
          type: array
          items:
            $ref: '#/components/schemas/p2p.Refund'
        rejected:
          type: string
          format: date-time
        released_to_seller:
          type: boolean
        remainder_paid:
          type: string
          format: date-time
        remainder_review:
          $ref: '#/components/schemas/p2p.Review'
        remainder_review_flagged:
          type: string
          format: date-time
        remainder_skipped:
          type: string
          format: date-time
        seller_handover_confirmed:
          type: string
          format: date-time
        seller_id:
          type: string
        seller_is_guest:
          type: boolean
        seller_phone_number:
          type: string
        skip_remainder:
          type: boolean
          description: |
            If `skip_remainder` is `true` then this transaction will
            move to the "confirm handover" step after the deposit has
            been accepted.
        status:
          type: string
      example:
        buyer_handover_confirmed: 2019-12-25T16:00:00Z
        buyer_id: feb33a87-3917-4538-9260-127c8a6b5232
        client_id: trustap-app
        created: 2019-12-25T09:00:00Z
        currency: eur
        deposit_accepted: 2019-12-25T12:00:00Z
        deposit_paid: 2019-12-25T11:00:00Z
        deposit_pricing:
          charge: 78
          price: 1234
        description: Soccer ticket
        funds_released: 2019-12-25T17:00:00Z
        id: 1309
        is_deposit_payment_in_progress: false
        is_remainder_payment_in_progress: false
        joined: 2019-12-25T10:00:00Z
        priced: 2019-12-25T13:00:00Z
        pricing:
          charge: 190
          price: 5000
        remainder_paid: 2019-12-25T14:00:00Z
        seller_handover_confirmed: 2019-12-25T15:00:00Z
        seller_id: ad5bb99f-85bf-47e1-be0d-15e7541c6ad7
        skip_remainder: false
        status: funds_released
    p2p.TransactionPage:
      required:
      - data
      - page
      - page_size
      - total_count
      - total_pages
      type: object
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/p2p.Transaction'
        page:
          type: integer
          format: int64
        page_size:
          type: integer
          format: int64
        total_count:
          type: integer
          format: int64
        total_pages:
          type: integer
          format: int64
    personal.BankAccount:
      required:
      - bank_name
      - country
      - currency_alpha_2
      - last4
      type: object
      properties:
        bank_name:
          type: string
        country:
          type: string
        currency_alpha_2:
          type: string
        last4:
          type: string
        routing:
          type: string
    personal.BankDetails:
      required:
      - account_number
      - country_code
      - currency
      type: object
      properties:
        account_number:
          type: string
        country_code:
          type: string
        currency:
          type: string
        routing_number:
          type: string
    personal.Card:
      required:
      - last4
      - month
      - year
      type: object
      properties:
        last4:
          type: string
        month:
          type: integer
          format: int64
        year:
          type: integer
          format: int64
    personal.DateValidation:
      type: object
      properties:
        max_date:
          type: integer
        max_day:
          type: integer
        max_month:
          type: integer
        max_year:
          type: integer
        min_day:
          type: integer
        min_month:
          type: integer
        min_year:
          type: integer
    personal.DebitAccount:
      required:
      - bank_account
      - card
      type: object
      properties:
        bank_account:
          $ref: '#/components/schemas/personal.BankAccount'
        card:
          $ref: '#/components/schemas/personal.Card'
    personal.Details:
      required:
      - address_city
      - address_country
      - address_line1
      - address_line2
      - address_postal_code
      - address_state
      - dob
      - id_number
      - name_first
      - name_last
      - phone
      type: object
      properties:
        address_city:
          $ref: '#/components/schemas/personal.VerifiableString'
        address_country:
          $ref: '#/components/schemas/personal.VerifiableString'
        address_line1:
          $ref: '#/components/schemas/personal.VerifiableString'
        address_line2:
          $ref: '#/components/schemas/personal.VerifiableString'
        address_postal_code:
          $ref: '#/components/schemas/personal.VerifiableString'
        address_state:
          $ref: '#/components/schemas/personal.VerifiableString'
        dob:
          $ref: '#/components/schemas/personal.VerifiableDate'
        id_number:
          $ref: '#/components/schemas/personal.VerifiableIdNumber'
        name_first:
          $ref: '#/components/schemas/personal.VerifiableString'
        name_last:
          $ref: '#/components/schemas/personal.VerifiableString'
        phone:
          $ref: '#/components/schemas/personal.VerifiablePhone'
    personal.FieldType:
      type: string
      enum:
      - date
      - id_number
      - phone
      - string
    personal.InstantPayoutBalance:
      required:
      - amount
      - currency
      type: object
      properties:
        amount:
          type: integer
          format: int64
        currency:
          type: string
    personal.InvalidReason:
      required:
      - code
      - description
      type: object
      properties:
        code:
          type: string
        description:
          type: string
          description: An English-language description of the error.
    personal.PayoutAttempt:
      required:
      - amount
      - arrival_date
      - created_date
      - status
      type: object
      properties:
        amount:
          type: integer
          format: int64
        arrival_date:
          type: integer
          format: int64
        created_date:
          type: integer
          format: int64
        failure_code:
          type: string
          enum:
          - account_closed
          - account_frozen
          - bank_account_restricted
          - bank_ownership_changed
          - could_not_process
          - debit_not_authorized
          - declined
          - insufficient_funds
          - invalid_account_number
          - incorrect_account_holder_name
          - incorrect_account_holder_address
          - incorrect_account_holder_tax_id
          - invalid_currency
          - no_account
          - unsupported_card
        status:
          type: string
          enum:
          - paid
          - pending
          - in_transit
          - canceled
          - failed
    personal.Validation:
      type: object
      properties:
        cannot_unset:
          type: boolean
        cannot_update:
          type: boolean
        max_length:
          type: integer
        min_length:
          type: integer
    personal.VerifiableDate:
      required:
      - required_now
      - status
      - type
      - validation
      - value
      type: object
      properties:
        invalid_reason:
          $ref: '#/components/schemas/personal.InvalidReason'
        required_now:
          type: boolean
        status:
          $ref: '#/components/schemas/personal.VerificationStatus'
        type:
          $ref: '#/components/schemas/personal.FieldType'
        validation:
          $ref: '#/components/schemas/personal.DateValidation'
        value:
          required:
          - day
          - month
          - year
          type: object
          properties:
            day:
              type: integer
            month:
              type: integer
            year:
              type: integer
    personal.VerifiableIdNumber:
      required:
      - required_now
      - status
      - type
      - validation
      - value
      type: object
      properties:
        invalid_reason:
          $ref: '#/components/schemas/personal.InvalidReason'
        required_now:
          type: boolean
        status:
          $ref: '#/components/schemas/personal.VerificationStatus'
        type:
          $ref: '#/components/schemas/personal.FieldType'
        validation:
          type: object
          properties:
            max_length:
              type: integer
            min_length:
              type: integer
        value:
          required:
          - provided
          type: object
          properties:
            provided:
              type: boolean
    personal.VerifiablePhone:
      required:
      - required_now
      - status
      - type
      - validation
      - value
      type: object
      properties:
        invalid_reason:
          $ref: '#/components/schemas/personal.InvalidReason'
        required_now:
          type: boolean
        status:
          $ref: '#/components/schemas/personal.VerificationStatus'
        type:
          $ref: '#/components/schemas/personal.FieldType'
        validation:
          type: object
          properties:
            number_min_length:
              type: integer
        value:
          required:
          - dial_code
          - dial_code_country
          - number
          type: object
          properties:
            dial_code:
              type: string
            dial_code_country:
              type: string
              description: "This field is mostly non-functional, but is instead used\
                \ to render the phone number for the user. This field is necessary\
                \ because different countries may use the same dial code (for example,\
                \ the US and Canada)."
            number:
              type: string
    personal.VerifiableString:
      required:
      - required_now
      - status
      - type
      - validation
      - value
      type: object
      properties:
        invalid_reason:
          $ref: '#/components/schemas/personal.InvalidReason'
        required_now:
          type: boolean
        status:
          $ref: '#/components/schemas/personal.VerificationStatus'
        type:
          $ref: '#/components/schemas/personal.FieldType'
        validation:
          $ref: '#/components/schemas/personal.Validation'
        value:
          type: string
    personal.VerificationSessionLastError:
      required:
      - code
      - reason
      type: object
      properties:
        code:
          type: string
          enum:
          - abandoned
          - consent_declined
          - country_not_supported
          - device_not_supported
          - document_expired
          - document_type_not_supported
          - document_unverified_other
          - email_unverified_other
          - email_verification_declined
          - id_number_insufficient_document_data
          - id_number_mismatch
          - id_number_unverified_other
          - phone_unverified_other
          - phone_verification_declined
          - selfie_document_missing_photo
          - selfie_face_mismatch
          - selfie_manipulated
          - selfie_unverified_other
          - under_supported_age
        reason:
          type: string
          description: |
            Explanation or description related to the error code.
      description: |
        Optional error information if there was an error in the verification session.
    personal.VerificationStatus:
      type: string
      enum:
      - unset
      - invalid
      - verifying
      - verified_and_verifying
      - verified
      - set
    users.Balances:
      required:
      - available
      type: object
      properties:
        available:
          type: array
          items:
            required:
            - amount
            - currency
            type: object
            properties:
              amount:
                type: integer
                format: int64
              currency:
                type: string
    users.Features:
      type: object
      properties:
        instant_payouts_enabled:
          type: boolean
    users.GuestUser:
      required:
      - created_at
      - email
      - id
      type: object
      properties:
        created_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
        email:
          type: string
        id:
          type: string
      example:
        id: 1-feb33a87-3917-4538-9260-127c8a6b5232
    users.TosAcceptance:
      required:
      - ip
      - unix_timestamp
      type: object
      properties:
        ip:
          minLength: 1
          type: string
        unix_timestamp:
          type: integer
          format: int64
    users.User:
      required:
      - created_at
      - email
      - id
      type: object
      properties:
        created_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
        email:
          type: string
        id:
          type: string
      example:
        id: 2-feb33a87-3917-4538-9260-127c8a6b5232
    users_client.User:
      required:
      - email
      - id
      type: object
      properties:
        email:
          type: string
        id:
          type: string
      example:
        email: test@test.com
        id: 2-feb33a87-3917-4538-9260-127c8a6b5232
  securitySchemes:
    APIKey:
      type: http
      scheme: basic
    OAuth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://sso.trustap.com/auth/realms/trustap-stage/protocol/openid-connect/auth
          tokenUrl: https://sso.trustap.com/auth/realms/trustap-stage/protocol/openid-connect/token
          scopes:
            basic_ls:offline_accept_listing: |
              This client may accept Online listings on the user's behalf
              while the user is offline.
            basic_ls:offline_create: |
              This client may create Online listings for the user while the
              user is offline.
            basic_tx:offline_accept_payment: |
              This client may accept payments for Online transactions on the
              user's behalf while the user is offline.
            basic_tx:offline_cancel: |
              This client may cancel Online transactions on the user's behalf
              while the user is offline.
            basic_tx:offline_claim: |
              This client may claim Online transactions on the user's behalf
              while the user is offline.
            basic_tx:offline_complain: |
              This client may submit complaints for Online transactions on the
              user's behalf while the user is offline.
            basic_tx:offline_create_join: |
              This client may create and join Online transactions on the
              user's behalf while the user is offline.
            basic_tx:offline_track: |
              This client may submit tracking information for Online
              transactions on the user's behalf while the user is offline.
            openid: |
              This client is making an OpenID Connect request.
            p2p_ls:offline_create: |
              This client may create F2F listings for the user while the user
              is offline.
            p2p_ls:offline_update: |
              This client may update F2F listings on the user's behalf while
              the user is offline.
            p2p_tx:offline_accept_deposit: |
              This client may accept deposits for F2F transactions on the
              user's behalf while the user is offline.
            p2p_tx:offline_cancel: |
              This client may cancel F2F transactions on the user's behalf
              while the user is offline.
            p2p_tx:offline_claim: |
              This client may claim F2F transactions on the user's behalf
              while the user is offline.
            p2p_tx:offline_complain: |
              This client may submit complaints for F2F transactions on the
              user's behalf while the user is offline.
            p2p_tx:offline_confirm_handover: |
              This client may confirm handovers for F2F transactions on the
              user's behalf while the user is offline.
            p2p_tx:offline_create_join: |
              This client may create and join F2F transactions on the user's
              behalf while the user is offline.
            p2p_tx:offline_set_price: |
              This client may set the price for F2F transactions on the user's
              behalf while the user is offline.
            profile: |
              This client may access the user's default profile claims: `name`,
              `family_name`, `given_name`, `middle_name`, `nickname`,
              `preferred_username`, `profile`, `picture`, `website`, `gender`,
              `birthdate`, `zoneinfo`, `locale`, and `updated_at`.
x-tagGroups:
- name: Users
  tags:
  - Buyers and Sellers
  - Clients
  - Personal
- name: Online transactions
  tags:
  - Online Transactions
  - Online Payment
  - Online Shipping
  - Online Complaint
  - Online Cancel
  - Online Buyer/Seller Details
- name: Face-to-face transactions
  tags:
  - F2F Transactions
  - F2F Payment
  - F2F Handover
  - F2F Complaint
  - F2F Cancel
  - F2F Buyer/Seller Details
- name: Trustap lite
  tags:
  - Trustap Lite
- name: Notifications
  tags:
  - Notifications
- name: Deprecated endpoints
  tags:
  - Online Multi-use Listings
  - Online Single-use Listings
  - F2F Multi-use Listings
  - F2F Single-use Listings
x-original-swagger-version: "2.0"
